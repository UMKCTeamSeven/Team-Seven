/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,a,o,r,l,h,c,u,d,p=t(this).data("ui-draggable"),g=p.options,f=g.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,l=r+p.snapElements[u].width,h=p.snapElements[u].top,c=h+p.snapElements[u].height,r-f>_||m>l+f||h-f>b||v>c+f||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==g.snapMode&&(s=f>=Math.abs(h-b),n=f>=Math.abs(c-v),a=f>=Math.abs(r-_),o=f>=Math.abs(l-m),s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=s||n||a||o,"outer"!==g.snapMode&&(s=f>=Math.abs(h-v),n=f>=Math.abs(c-b),a=f>=Math.abs(r-m),o=f>=Math.abs(l-_),s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||a||o||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})})(jQuery);
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function f(n){return t.raw?n:decodeURIComponent(n)}function e(n){return i(t.json?JSON.stringify(n):String(n))}function o(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(u," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:o(i);return n.isFunction(r)?r(u):u}var u=/\+/g,t=n.cookie=function(u,o,s){var y,a,h,v,c,p;if(o!==undefined&&!n.isFunction(o))return s=n.extend({},t.defaults,s),typeof s.expires=="number"&&(y=s.expires,a=s.expires=new Date,a.setTime(+a+y*864e5)),document.cookie=[i(u),"=",e(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(h=u?undefined:{},v=document.cookie?document.cookie.split("; "):[],c=0,p=v.length;c<p;c++){var w=v[c].split("="),b=f(w.shift()),l=w.join("=");if(u&&u===b){h=r(l,o);break}u||(l=r(l))===undefined||(h[b]=l)}return h};t.defaults={};n.removeCookie=function(t,i){return n.cookie(t)===undefined?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}});
/**
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.6
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,targ,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
(function(n){"use strict";var t=ch9.functions;t.ProgressControlConstructor=function(t){var i=this,r;if(this.control=t,i.control.hasClass("circles"))for(r=0;r<6;r++)i.control.append(n("<span>").addClass("circle"));return{show:function(){i.control&&i.control.fadeIn("slow")},hide:function(){i.control&&i.control.fadeOut("fast")}}}})(jQuery);
(function(){var i=ch9.functions;i.userAgent={};var f,t={Name:"Unknown",Major:0,Type:"Unknown"},n={Name:"Unknown",Major:0,Minor:0,Type:"Unknown"},e=function(n){if(f)return f;try{var t;t=n?n:window.navigator.userAgent;f=t}catch(i){}return f},u=function(){var n=e(),i;return t.Name!="Unknown"?t:(n.toLowerCase().indexOf("iemobile")>=0?(i=n.toLowerCase().split("iemobile/")[1].split("."),t.Name="WindowsPhone",t.Major=parseInt(i[0])):n.toLowerCase().indexOf("iphone")>=0||n.toLowerCase().indexOf("ipod")>=0?(i=n.split("Version/")[1].split("."),t.Name="iPhone",t.Major=parseInt(i[0])):n.toLowerCase().indexOf("android")>=0?(t.Name="Android",i=n.indexOf("Version/")>-1?n.split("Version/")[1].split("."):n.split("Android")[1].split("."),t.Major=parseInt(i[0])):n.toLowerCase().indexOf("windows nt")>=0||n.toLowerCase().indexOf("mozilla/4.0 (compatible; msie 6.0)")>=0?(t.Name="Windows",n.toLowerCase().indexOf("windows nt 5.0")>=0&&(t.Type="Win2k"),n.toLowerCase().indexOf("win64")>=0&&(t.Type="Win64")):n.toLowerCase().indexOf("ppc mac os x")>=0?(t.Name="Mac",t.Type="PPC"):n.toLowerCase().indexOf("intel mac os x")>=0?(t.Name="Mac",t.Type="Intel"):n.toLowerCase().indexOf("linux")>=0&&(t.Name="Linux"),t)},r=function(){var t=e(),i,r;return n.Name!="Unknown"?n:(t.indexOf("MSIE")>=0?(n.Name="IE",n.Major=parseInt(t.split("MSIE")[1])):t.indexOf("Trident/")>-1&&(t.indexOf("Windows NT 6.3")>-1||t.indexOf("Windows Phone")>-1)?(n.Name="IE",n.Major=parseInt(t.split("rv:")[1])):t.indexOf("Firefox")>=0?(i=t.split("Firefox/")[1].split("."),n.Name="Firefox",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Chrome")>=0?(i=t.split("Chrome/")[1].split("."),n.Name="Chrome",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Safari")>=0?(i=t.split("Version/")[1].split("."),n.Name="Safari",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Opera")>=0?(i=t.split("Version/")[1].split("."),n.Name="Opera",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1].substring(0,1))):t.indexOf("Minefield")>=0?(i=t.split("Minefield/")[1].split("."),n.Name="Minefield",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Gecko/")>=0&&(r=t.split("Gecko/")[1].substring(0,6),n.Name="Gecko",n.Major=parseInt(r)),n)},o=function(){var t=u(),n=r();return t.Name=="WindowsPhone"&&(t.Major<7||t.Major==7&&t.Minor<5)||t.Name=="Android"&&t.Major>0&&(t.Major<2||t.Major==2&&t.Minor<3)||t.Name=="iPhone"&&t.Major<3||n.Name=="IE"&&n.Major<9||n.Name=="Firefox"&&(n.Major<3||n.Major==3&&n.Minor<5)||n.Name=="Chrome"&&n.Major<5||n.Name=="Safari"&&n.Major<3||n.Name=="Opera"&&(n.Major<10||n.Major==10&&n.Minor<5)?!1:!0},s=function(){var n=u();return n.Name=="WindowsPhone"||n.Name=="iPhone"||n.Name=="Android"&&n.Major<3?!1:!0},h=function(){var t=u(),n=r();return t.Name=="WindowsPhone"||t.Name=="Android"||t.Name=="iPhone"||t.Name=="Windows"&&(n.Name=="IE"&&n.Major<6||n.Name=="Safari"&&(n.Major<3||n.Major==5)||n.Name=="Firefox"&&n.Major<3||n.Name=="Minefield"&&n.Major<3||n.Name=="Gecko"&&n.Major<200805)||t.Name=="Mac"&&(n.Name=="IE"||n.Name=="Opera"||n.Name=="Safari"&&(n.Major<3||n.Major==5)||n.Name=="Firefox"&&n.Major<2||n.Name=="Minefield"&&n.Major<2)?!1:!0},c=function(){var n=r();return n.Name=="Firefox"&&n.Major==3&&n.Minor<7};i.userAgent.html5playerSupported=function(){return o()};i.userAgent.flashPlayerSupported=function(){return s()};i.userAgent.silverlightPossible=function(){return h()};i.userAgent.isMetro=function(){var n=r();return n.Name=="IE"&&n.Type=="Metro"};i.userAgent.isIE11Plus=function(){var n=r();return n.Name=="IE"&&n.Major>10};i.userAgent.isLt37Firefox=function(){return c()};i.userAgent.isIOS=function(){var n=e();return n.match(/iPhone/i)||n.match(/iPod/i)||n.match(/iPad/i)?!0:!1};i.userAgent.isIE=function(){var n=u(),t=r();return n.Name=="Windows"&&t.Name=="IE"};i.userAgent.isIE10=function(){var t=u(),n=r();return t.Name=="Windows"&&n.Name=="IE"&&n.Major==10};i.userAgent.isIE9=function(){var t=u(),n=r();return t.Name=="Windows"&&n.Name=="IE"&&n.Major==9}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.CaptionDataModel=function(t){this.kind="subtitles";this.label=n.helpers.languages[t.Language];this.src=t.Url;this.srclang=t.Language}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.EpisodeDataModel=function(t){var i=t.Event!==undefined,r;this.contentId=t.ID;this.contentType=i?n.ContentType.session:t.Area!==undefined?n.ContentType.entry:n.ContentType.oneoff;this.description=i&&t.Description!==null?t.Description:t.Body!==null?t.Body:"";this.releaseDate=n.helpers.getDateFromJson(t.PublishedDate);this.images={playerPreview:n.helpers.removeProtocol(t.VideoPlayerPreviewImage||(i?t.FeaturedImage:t.LargeThumbnail)),large:n.helpers.removeProtocol(i?t.FeaturedImage||t.VideoPlayerPreviewImage:t.LargeThumbnail||t.VideoPlayerPreviewImage),medium:n.helpers.removeProtocol(i?t.Thumbnail:t.MediumThumbnail||t.SmallThumbnail),small:n.helpers.removeProtocol(i?t.Thumbnail:t.SmallThumbnail||t.MediumThumbnail)};this.videos=[{type:"mp4high",src:n.helpers.removeProtocol(t.VideoMP4High)},{type:"mp4medium",src:n.helpers.removeProtocol(t.VideoMP4Medium)},{type:"mp4low",src:n.helpers.removeProtocol(t.VideoMP4Low)},{type:"wmvhigh",src:n.helpers.removeProtocol(t.VideoWMVHQ)},{type:"wmvmedium",src:n.helpers.removeProtocol(t.VideoWMV)},{type:"smooth",src:n.helpers.removeProtocol(t.VideoSmooth)}];this.isLive=!1;this.length=t.MediaLengthInSeconds!==undefined?t.MediaLengthInSeconds:0;this.title=t.Title!==undefined?t.Title:"";this.series=i?new n.Models.SeriesDataModel(t.Event):t.Area!==undefined?new n.Models.SeriesDataModel(t.Area):new n.Models.SeriesDataModel({Description:"One-off blog posts.",DisplayName:"Posts"});this.api=i?"/Sessions(guid'"+t.ID+"')/":"/Entries(guid'"+t.ID+"')/";this.relatedApi="/Related?id="+t.ID;this.tags=t.Tags!==undefined&&typeof t.Tags.map=="function"?t.Tags.map(function(t){return new n.Models.TagDataModel(t,i)}):[];r=i?t.Speakers:t.Authors;this.niners=r!==undefined&&typeof r.map=="function"?r.map(function(t){return new n.Models.NinerDataModel(t,i)}):[];this.captions=t.Captions!==undefined&&typeof t.Captions.map=="function"?t.Captions.map(function(t){return new n.Models.CaptionDataModel(t)}).sort(function(n,t){return n.label===t.label?0:n.label<t.label?-1:1}):[];this.averageRating=t.Rating;this.permalink=t.Permalink;this.inQueue=t.InQueue;this.progress=t.LastViewedPosition;this.userRating=t.CurrentRating}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.NinerDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.speaker:n.ContentType.author;this.uniqueName=t.Name;this.title=t.DisplayName||t.FullName||t.Name||t.UrlSafeName;this.images={avatar:n.helpers.removeProtocol(t.Avatar||t.Photo),wideTile:n.helpers.removeProtocol(t.Avatar||t.Photo),smallTile:n.helpers.removeProtocol(t.Avatar||t.Photo)};this.languages=t.Languages||[];this.profileUri="//channel9.msdn.com/niners/"+t.Name;this.api=i?"/Speakers(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers":"/Users(guid'"+t.ID+"')/Entries?$expand=Area,Tags,Authors"}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.SeriesDataModel=function(t){var i=t.EventGroup!==undefined&&t.EventGroup!==null;this.contentId=t.ID;this.contentType=i?n.ContentType.event:n.ContentType.area;this.description=t.Description!=null?t.Description:"";this.releaseDate=n.helpers.getDateFromJson(i?t.Starts:t.MostRecentEntry);this.images={banner:n.helpers.removeProtocol(t.BannerImage),wideTile:n.helpers.removeProtocol(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage),smallTile:n.helpers.removeProtocol(t.ThumbnailImage||t.SmallThumbnailImage),large:n.helpers.removeProtocol(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage),medium:n.helpers.removeProtocol(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage),small:n.helpers.removeProtocol(t.SmallThumbnailImage||t.WideScreenThumbnailImage||t.ThumbnailImage)};this.title=t.DisplayName!==undefined?t.DisplayName:"";this.api=i?"/Events(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers&$orderby=Track%20desc":t.ID?"/Areas(guid'"+t.ID+"')/Entries?$expand=Area,Authors,Tags":"";this.seasonsApi=i?"/Events(guid'"+t.ID+"')/Sessions/Groups?groupby=track":t.ID?"/Areas(guid'"+t.ID+"')/Entries/Groups?groupby=year":"";this.permalink=t.Permalink}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.TagDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.eventTag:n.ContentType.tag;this.uniqueName=t.Name;this.title=t.DisplayName!==undefined?t.DisplayName:t.Title!==undefined?t.Title:"";this.api=t.ID!==undefined?"/Tags(guid'"+t.ID+"')"+(i?"/Sessions?$expand=Event,Speakers":"/Entries?$expand=Area,Tags,Authors"):""}})();
(function(){"use strict";var n=ch9.functions,i=n.helpers,t=i.debug,r="//"+window.location.host+"/odata",f="https://c9search.azurewebsites.net/content/search",u=function(n){var t=[];return n.value!==undefined?n.value.forEach(function(n){t.push(n)}):n.documents!==undefined?n.documents.forEach(function(n){n.data!==undefined?t.push(n.data):t.push(n)}):t.push(n),t};n.ContentType={entry:"entry",session:"session",oneoff:"oneoff",area:"area",event:"event",speaker:"speaker",author:"author",tag:"tag",eventTag:"eventTag"};n.Services={Series:{getData:function(t,i,r){t=t||n.ContentType.SeriesFilter.shows;var f="series"+t,u="/Areas?$filter=Type%20eq%20'"+t+"'&$orderby=MostRecentEntry%20desc";return t==n.ContentType.SeriesFilter.events&&(u="/Events?$orderby=Starts%20desc"),i=i||25,n.Services.Channel9DataSource({cacheName:f,source:u,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.SeriesDataModel(t)}).slice(0,i)})},getSeries:function(t,i){if(t&&t!="undefined"){i=i||n.ContentType.area;var u="series"+i+t,r="/Areas(guid'"+t+"')";return i==n.ContentType.event&&(r="/Events(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.SeriesDataModel(t)});return i[0]})}return $.when(null)}},Episodes:{getFeaturedData:function(t,i){return n.Services.Channel9DataSource({cacheName:"featured",source:"/Featured?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getNewReleaseData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"newreleases",source:"/Entries?$expand=Area,Authors,Tags&$filter=Freshness%20ne%20null&$orderby=Freshness%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getPopularData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"popular",source:"/Entries?$expand=Area,Authors,Tags&$orderby=ViewsThisWeek%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getQueueData:function(t){return t=t||25,n.Services.Channel9DataSource({source:"/Queue?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors,Channel9.ODataModel.Entry/Tags",count:t,useAuth:!0}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).sort(function(n,t){return t.releaseDate===n.releaseDate?0:n.releaseDate>t.releaseDate?-1:1}).slice(0,t)})},getData:function(t,i,r,u){if(t){var f="episodes"+t.contentId,e=t.episodesApi;return r=r||25,n.Services.Channel9DataSource({cacheName:f,source:e,count:r,skipCache:u}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedData:function(t,i,r){if(t){var u="relatedepisodes"+t.contentId,f=t.relatedApi;return i=i||25,n.Services.Channel9DataSource({cacheName:u,source:f,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedEpisodes:function(t,i){return t?n.Services.Channel9DataSource({source:t}).then(function(t){if(t.message!==undefined)return[];var r=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return r.slice(0,i)}):$.when([])},getEpisode:function(t,i){if(t){var u=t.contentType||n.ContentType.session,f="episode"+t.contentId+i,r="/Entries(guid'"+t.contentId+"')?$expand=Area,Tags,Authors";return u==n.ContentType.session&&(r="/Sessions(guid'"+t.contentId+"')?$expand=Event,Speakers"),n.Services.Channel9DataSource({cacheName:f,source:r,useAuth:i}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return i[0]})}return $.when(null)},search:function(t,i){if(t.searchTerm===undefined||t.searchTerm=="")return $.when([]);var r="episodessearch"+t.searchTerm,u=t.searchTerm.indexOf("undefined")>-1?t.searchTerm.replace("undefined",""):t.searchTerm,f="/Search?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,&query="+u;return i=i||25,n.Services.Channel9DataSource({cacheName:r,source:f,count:i}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})},AzureSearch:function(t){if(t.text===undefined||t.text=="")return $.when([]);var i="azuresearch"+t.text;return t.count=t.count||15,n.Services.Channel9SearchData({text:t.text,skip:t.skip,count:t.count,filter:t.filter}).then(function(t){if(t.message!==undefined)return{totalCount:0,results:[]};var i=t.results.map(function(t){return new n.Models.SearchResultDataModel(t)});return{totalCount:t.totalCount,results:i}})}},Niners:{getNiner:function(t,i){if(t){i=i||n.ContentType.author;var u="niner"+i,r="/Users(guid'"+t+"')";return i==n.ContentType.speaker&&(r="/Speakers(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.NinerDataModel(t,i==n.ContentType.speaker)});return r[0]})}return $.when(null)},getAuthenticatedNiner:function(){return n.Services.Channel9DataSource({cacheName:"user",source:"/Users/Me",count:1,useAuth:!0}).then(function(t){if(t&&t.message===undefined){var i=t.map(function(t){return new n.Models.NinerDataModel(t)});return i[0]}return null})}},Tags:{getTag:function(t,i){if(t){i=i||n.ContentType.tag;var r=i+t,u="/Tags(guid'"+t+"')";return n.Services.Channel9DataSource({cacheName:r,source:u}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.TagDataModel(t,i==n.ContentType.eventTag)});return r[0]})}return $.when(null)}},addToQueue:function(t){var i=t.api.split("?")[0]+"AddToQueue";return n.Services.Channel9PostData(i,null)},removeFromQueue:function(t){var i=t.api.split("?")[0]+"RemoveFromQueue";return n.Services.Channel9PostData(i,null)},removeFromQueueByUrl:function(t){return n.Services.Channel9PostData(t,null)},isInQueue:function(t){return n.Services.Episodes.getQueueData().then(function(n){for(var i=0;i<n.length;i++)if(n[i].contentId===t.contentId)return $.when(!0);return $.when(!1)})},Rating:{getRatingData:function(){return $.when([])}},addRating:function(t,i){var r=t.api.split("?")[0]+"Rate",u=JSON.stringify({Rating:i});return n.Services.Channel9PostData(r,u)},addVideoProgress:function(i,r,u){var e,f,o,s;i&&r&&r.isLoggedIn&&n.VideoPlayer&&((e=n.VideoPlayer.getPosition(),f=e/60,(i.progress==Math.floor(f)||e<1)&&!u)||(i.progress=Math.floor(f),o=i.api.split("?")[0]+"UpdateVideoProgress",s=JSON.stringify({Device:"Channel 9 Website",Progress:f.toString()}),n.Services.Channel9PostData(o,s).then(function(n){n.status=="200"||n.value==!0?t&&console.log("new progress update to db: "+f.toString()):t&&console.log("unsuccessful updating progress in db: "+n.status)},function(n){t&&console.log("error sending progress update to db: "+n.responseText)})))},sendAnalytics:function(t,r){if(t&&t.length!=0&&n.VideoPlayer){var s=n.VideoPlayer.getPosition(),u=s/t.length,f="",e="",o="",h=Math.floor(u/.05)*.05>=.95;if(u=Math.floor(u/.25)*.25,!(u<t.percentage)&&(t.percentage!=u||h)&&(t.percentage!=.95||!h)&&!(s<1)&&!isNaN(u)){t.percentage=h?.95:u;switch(t.percentage){case 0:f="Play";e="0";o="100";break;case.25:f=e="25";o="101";break;case.5:f=e="50";o="101";break;case.75:f=e="75";o="101";break;case.95:f="Complete";e="100";o="103"}dcsMultiTrack&&typeof dcsMultiTrack=="function"&&dcsMultiTrack("WT.clip_n",t.contentId,"WT.clip_ev",f,"WT.dl",7,"WT.z_vidType",r);MscomCustomEvent&&typeof MscomCustomEvent=="function"&&MscomCustomEvent("ms.video.completionrate",e,"ms.video.watchtime",i.getTimePieces(s),"ms.video.length",i.getTimePieces(t.length),"ms.vp_uuid",t.contentId,"ms.cmptyp",r,"ms.video.tech",r,"ms.interactiontype",o)}}},Channel9DataSource:function(i){var s;if(!i.source)return $.when([]);var e=i.count||0,o=i.skip||0,f=i.source;return f.indexOf("//")<0&&(f=r+f),o>0&&(f=n.helpers.addQueryStringParam(f,"$skip="+o)),e>0&&(f=n.helpers.addQueryStringParam(f,"$top="+e)),t&&console.log("Making request: "+f),s=$.ajax({type:"GET",url:f,data:null,timeout:1e4}),$.when(s).then(function(n){if(!n)return[];try{return u(n)}catch(i){return t&&console.log("error: "+JSON.stringify(i)),[]}},function(n){return t&&console.log("error: "+JSON.stringify(n)),[]})},Channel9PostData:function(n,i){if(!n)return $.when([]);t&&console.log("Post data request: "+r+n+" "+i);var u=$.ajax({type:"POST",url:r+n,headers:{"Content-type":"application/json"},data:i,timeout:1e4});return $.when(u)},Channel9SearchData:function(i){var o;if(!i.text)return $.when([]);var r=n.helpers.addQueryStringParam(f,"text="+i.text),s=i.count||15,h=i.skip||0,e=i.filter||"";return r=n.helpers.addQueryStringParam(r,"$top="+s),r=n.helpers.addQueryStringParam(r,"$skip="+h),e!=""&&(r=n.helpers.addQueryStringParam(r,"$filter="+e)),r=n.helpers.addQueryStringParam(r,"$inlinecount=allpages"),t&&console.log("Search request: "+r),o=$.ajax({dataType:"jsonp",url:r,timeout:6e4}),$.when(o).then(function(n){if(!n)return{totalCount:0,results:[]};try{return{totalCount:n.totalCount,results:u(n)}}catch(i){return t&&console.log("error: "+JSON.stringify(i)),{totalCount:0,results:[]}}},function(n){return t&&console.log("error: "+JSON.stringify(n)),{totalCount:0,results:[]}})}}})();
(function(){"use strict";if(ch9&&typeof ch9!="undefined"&&ch9.functions&&typeof ch9.functions!="undefined"){var r=ch9.functions,n=!1,u={customerId:"c3.Microsoft-DPE",isLive:!1,playerName:"unknown",serviceUrl:"http://livepass.conviva.com"},f="2.90.0.24127",i=!1,t=!1;r.Ch9ConvivaConstructor=function(r,e){if(!e)return null;self.options=$.extend(u,r);self.streamer=e;self.session=null;var s=function(t){t.code==0?n&&console.log("Conviva LivePass inititalized successfully"):Conviva.LivePass.ready?n&&console.log("Conviva LivePass post-initialization feedback.\n \tCode: "+t.code+";\n \tMessage: "+t.message):n&&console.log("Conviva LivePass failed to initialize!\n \tConviva metrics will not be captured! \tCode: "+t.code+"; \tMessage: "+t.message)},h=function(){if(typeof Conviva!="undefined"&&Conviva.LivePass&&typeof Conviva.LivePass.init=="function"&&!t)try{Conviva.LivePass.init(self.options.serviceUrl,self.options.customerId,s);t=!0;Conviva.LivePass.toggleTraces(n)}catch(i){n&&console.log(i)}},o=function(){if(Conviva&&Conviva.LivePass&&Conviva.ConvivaContentInfo&&Conviva.ConvivaContentInfo.createInfoForLightSession&&typeof Conviva.ConvivaContentInfo.createInfoForLightSession=="function"&&t)try{Conviva.LivePass.cleanupMonitoringSession&&typeof Conviva.LivePass.cleanupMonitoringSession=="function"&&self.streamer&&Conviva.LivePass.cleanupMonitoringSession(self.streamer);var i=Conviva.ConvivaContentInfo.createInfoForLightSession(self.options.assetName);i.cdnName=Conviva.ConvivaContentInfo.CDN_NAME_MICROSOFT;i.isLive=self.options.isLive;i.playerName=self.options.playerName;i.streamUrl=self.options.source;i.viewerId=self.options.c9Id;i.tags={pageUrl:document.location.hostname+document.location.pathname,pageDomain:document.location.hostname,query:document.location.search,campaign:self.options.mrcId};document.referrer&&(i.tags.pageReferrer=document.referrer);Conviva.LivePass.createSession&&typeof Conviva.LivePass.createSession=="function"&&(self.session=Conviva.LivePass.createSession(self.streamer,i),self.session.setContentLength(self.options.duration))}catch(r){n&&console.log(r)}};return i?o():setTimeout(function(){var n=document.createElement("script"),t;n.src="/scripts/conviva/"+f+"/LivePass.js";n.type="text/javascript";n.async=!0;t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t);n.addEventListener("load",function(){i=!0;h();o()},!1)},1),{remove:function(){if(Conviva&&Conviva.LivePass&&Conviva.LivePass.cleanupMonitoringSession&&typeof Conviva.LivePass.cleanupMonitoringSession=="function"&&self.session)try{Conviva.LivePass.cleanupMonitoringSession(self.session)}catch(t){n&&console.log(t)}}}}}})();
(function(n){var t=ch9.functions,s=t.helpers,i=t.Resources,h=[],e=!1,c=function(){if(t.playerPresenter||typeof t.playerPresenter=="undefined"){var i=n(".playerGoesHere",t.playerPresenter.getContainer());try{t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&(t.VideoPlayer.isPaused()||(t.VideoPlayer.pause(),e=!0),i.hide())}catch(r){}self.overlayEl.detach().insertAfter(i).show().children("div").show()}},l=function(){if(t.playerPresenter||typeof t.playerPresenter=="undefined"){var i=n(".playerGoesHere",t.playerPresenter.getContainer());try{t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&(e&&(t.VideoPlayer.play(),e=!1),i.show())}catch(r){}self.overlayEl.detach().appendTo(self.videoOptionsEl).hide()}},y=function(){var i;if(self.queueLoginEl&&!self.queueLoginEl.hasClass("loggedIn")){self.queueLoginEl.show();self.queueLinkEl.hasClass("selected")||(self.queueLinkEl.addClass("selected"),self.queueLoginEl.show());return}var t=n("form#manage-queue",self.videoOptionsEl),r=n(".inqueue",self.queueLinkEl).length>0,u=r?t.data("removefromqueueurl"):t.data("addtoqueueurl"),f=n(".working",self.videoOptionsEl).length>0;f||(n("span",self.queueLinkEl).remove(),n('<span class="working icon" />').html("&nbsp;").prependTo(self.queueLinkEl));i=n.ajax({type:"POST",url:u,data:t.serialize(),dataType:"json",timeout:1e4});h.push(i);n.when(i).then(function(n){n.success?p(!r):w(n.message,n.tryAgain)})},p=function(t){n("span",self.queueLinkEl).remove();t?n('<span class="inqueue icon" />').html("&nbsp;").prependTo(self.queueLinkEl):n('<span class="add icon" />').html("&#43;").prependTo(self.queueLinkEl);self.queueLinkEl.removeClass("selected");self.queueLinkEl.blur()},w=function(t){var i=n(".error",self.videoOptionsEl);i.html(t);i.show()},u={"x-large":1280,large:960,medium:640,small:560,custom:512},b=function(){v();o();c();self.type="auto";self.size="large";self.language="";self.autoplay=!1;self.timecode="";self.embedLinkEl.addClass("selected");self.overlayContentEl.empty().append(n("<h2>").html(i.getString("JsVideoPlayerEmbedCode"))).append(n("<textarea>").attr("readonly",!0).addClass("embed-code bypassDirty").text(t.playerPresenter.getEmbedCode(self.type,u[self.size],self.language,self.autoplay,self.timecode)).on("click",function(){n(this).data("selected")||(this.select(),n(this).data("selected","true"))})).append(n("<h3>").html(i.getString("JsVideoPlayerEmbedCodeOptions"))).append(n("<div>").addClass("settings optional").append(n("<div>").addClass("setting type").append(n("<label>").html(i.getString("JsVideoPlayerEmbedCodeFormat"))).append(n("<select>").addClass("embed-type bypassDirty").on("change",function(i){self.type=i.currentTarget.value;n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,u[self.size],self.language,self.autoplay,self.timecode))}).ifThen(t.playerPresenter&&t.playerPresenter.getDefaultVideoUrl(),function(){this.append(n("<option>").attr("value","").html(i.getString("JsVideoPlayerFormatsAuto")))}).ifThen(t.html5Presenter&&t.html5Presenter.haveVideo,function(){this.append(n("<option>").attr("value","html5").text("HTML5"))}).ifThen(t.silverlightPresenter&&t.silverlightPresenter.haveSmoothVideo,function(){this.append(n("<option>").attr("value","smooth").text("Smooth Streaming (Silverlight)"))}).ifThen(t.silverlightPresenter&&t.silverlightPresenter.haveProgressiveVideo,function(){this.append(n("<option>").attr("value","progressive").text("Progressive (Silverlight)"))}).ifThen(t.flashPresenter&&t.flashPresenter.haveVideo,function(){this.append(n("<option>").attr("value","flash").text("Flash"))}).ifThen(t.officemixPresenter&&t.officemixPresenter.haveVideo,function(){this.append(n("<option>").attr("value","officemix").text("Office Mix"))}))).ifThen(t.playerPresenter&&t.playerPresenter.getCaptions()&&t.playerPresenter.getCaptions().length,function(){var r=t.playerPresenter.getCaptions();this.append(n("<div>").addClass("setting language").append(n("<label>").html(i.getString("JsVideoPlayerEmbedCodeLanguage"))).append(n("<select>").addClass("embed-language bypassDirty").on("change",function(i){self.language=i.currentTarget.value;n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,u[self.size],self.language,self.autoplay,self.timecode))}).append(n("<option>").attr("value","").html(i.getString("JsVideoPlayerEmbedCodeLanguageNone"))).ifThen(r.length,function(){var t=this;n.each(r,function(i,r){t.append(n("<option>").attr("value",r.language).text(r.label))})})))}).append(n("<div>").addClass("setting size").append(n("<label>").html(i.getString("JsVideoPlayerEmbedCodeSize"))).append(n("<select>").addClass("bypassDirty").on("change",function(i){self.size=i.currentTarget.value;self.size=="custom"?(n(".custom",self.overlayContentEl).show(),self.customWidth=u[self.size],self.customHeight=Math.round(self.customWidth*.5625),n("#customWidth",self.overlayContentEl).val(self.customWidth),n("#customHeight",self.overlayContentEl).val(self.customHeight)):n(".custom",self.overlayContentEl).hide();n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,u[self.size],self.language,self.autoplay,self.timecode))}).append(n("<option>").attr("value","x-large").text("1280 x 720")).append(n("<option>").attr({value:"large",selected:"selected"}).text("960 x 540")).append(n("<option>").attr("value","medium").text("640 x 360")).append(n("<option>").attr("value","small").text("560 x 315")).append(n("<option>").attr("value","custom").html(i.getString("JsVideoPlayerEmbedCodeSizeCustom")))).append(n("<div>").addClass("custom").hide().append(n("<input>").addClass("bypassDirty").attr({id:"customWidth",maxlength:"4"}).on("change",function(i){self.customWidth=i.currentTarget.value;self.customHeight=Math.round(self.customWidth*.5625);n("#customHeight",self.overlayContentEl).val(self.customHeight);n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,self.customWidth,self.language,self.autoplay,self.timecode))})).append(n("<span>").text("x")).append(n("<input>").addClass("bypassDirty").attr({id:"customHeight",maxlength:"4"}).on("change",function(i){self.customHeight=i.currentTarget.value;self.customWidth=Math.round(self.customHeight/.5625);n("#customWidth",self.overlayContentEl).val(self.customWidth);n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,self.customWidth,self.language,self.autoplay,self.timecode))})))).append(n("<div>").addClass("setting autoplay").append(n("<label>").append(n("<input>").addClass("bypassDirty").attr({type:"checkbox",id:"autoplay"}).on("change",function(){self.autoplay=n("#autoplay",self.overlayContentEl).is(":checked");self.timecode="";n("#paused",self.overlayContentEl).prop("checked",!1);self.autoplay?n(".timecode",self.overlayContentEl).show():n(".timecode",self.overlayContentEl).hide().find("option").prop("selected",!1);n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,self.customWidth,self.language,self.autoplay,self.timecode))})).append(n("<span>").html(i.getString("JsVideoPlayerEmbedCodeAutoplay")))).append(n("<div>").addClass("timecode").hide().append(n("<select>").addClass("bypassDirty hours").on("change",f)).append(n("<span>").addClass("hours").html(i.getString("JsVideoPlayerEmbedCodeTimecodeHours"))).append(n("<select>").addClass("bypassDirty minutes").on("change",f)).append(n("<span>").addClass("minutes").html(i.getString("JsVideoPlayerEmbedCodeTimecodeMinutes"))).append(n("<select>").addClass("bypassDirty seconds").on("change",f)).append(n("<span>").addClass("seconds").html(i.getString("JsVideoPlayerEmbedCodeTimecodeSeconds"))).append(n("<label>").append(n("<input>").addClass("bypassDirty").attr({type:"checkbox",id:"paused"}).on("change",function(){var i=n("#paused",self.overlayContentEl).is(":checked");f();self.timecode=self.timecode.split(":paused")[0];i&&(self.timecode+=":paused");n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,self.customWidth,self.language,self.autoplay,self.timecode))})).append(n("<span>").html(i.getString("JsVideoPlayerEmbedCodePaused")))))));k()},k=function(){if(t.playerPresenter&&t.playerPresenter.getDuration()){var o=t.playerPresenter.getDuration(),r=new Date(o*1e3),u=r.getUTCHours(),f=r.getUTCMinutes(),e=r.getUTCSeconds(),i;if(u>0)for(i=0;i<=u;i++)n(".timecode select.hours",self.overlayContentEl).append(n("<option>").attr("value",i).text(i));else n(".timecode .hours",self.overlayContentEl).addClass("hidden");if(f>0)for(i=0;i<=f;i++)n(".timecode select.minutes",self.overlayContentEl).append(n("<option>").attr("value",i).text(i));else n(".timecode .minutes",self.overlayContentEl).addClass("hidden");if(e>0)for(i=0;i<=e;i++)n(".timecode select.seconds",self.overlayContentEl).append(n("<option>").attr("value",i).text(i))}},f=function(){var i=n(".timecode .hours",self.overlayContentEl).val()||0,r=n(".timecode .minutes",self.overlayContentEl).val()||0,u=n(".timecode .seconds",self.overlayContentEl).val()||0,f=n(".timecode #paused",self.overlayContentEl).is(":checked");self.timecode="";(i>0||r>0||u>0||f)&&(self.timecode=i+"h"+r+"m"+u+"s");n(".embed-code",self.overlayContentEl).text(t.playerPresenter.getEmbedCode(self.type,self.customWidth,self.language,self.autoplay,self.timecode))},a=function(){self.embedLinkEl.removeClass("selected");self.embedLinkEl.blur();l()},d=function(){a();o();c();self.formatsLinkEl.addClass("selected");self.overlayContentEl.html("<h2>"+i.getString("JsVideoPlayerFormats")+'<\/h2><div class="formats-note"><p>'+i.getString("JsVideoPlayerFormatsText")+'<\/p><\/div><ul class="format-types"><\/ul>');t.playerPresenter&&t.playerPresenter.getDefaultVideoUrl()&&r("auto");t.html5Presenter&&t.html5Presenter.haveVideo&&t.html5Presenter.isPlayPossible&&r("html5");t.silverlightPresenter&&t.silverlightPresenter.isPlayPossible&&(t.silverlightPresenter.haveSmoothVideo&&r("smooth"),t.silverlightPresenter.haveProgressiveVideo&&r("progressive"));t.flashPresenter&&t.flashPresenter.haveVideo&&t.flashPresenter.isPlayPossible&&r("flash");t.officemixPresenter&&t.officemixPresenter.haveVideo&&t.officemixPresenter.isPlayPossible&&r("officemix")},r=function(r){if(t.playerPresenter){var u=self.formatsLinkEl.data("selectedformat"),f={auto:{label:i.getString("JsVideoPlayerFormatsAuto"),description:i.getString("JsVideoPlayerFormatsAutoText"),selected:u=="auto"},html5:{label:"HTML5",description:s.convertBreaksToHtml(i.getString("JsVideoPlayerFormatsHTML5Text")),selected:u=="html5"},smooth:{label:"Smooth Streaming",description:String.format(i.getString("JsVideoPlayerFormatsSmoothStreamingText"),t.silverlightPresenter.currentVersion,t.silverlightPresenter.currentVersion.split(".")[0]),selected:u=="smooth"},progressive:{label:"Progressive",description:String.format(i.getString("JsVideoPlayerFormatsProgressiveText"),t.silverlightPresenter.currentVersion,t.silverlightPresenter.currentVersion.split(".")[0]),selected:u=="progressive"},flash:{label:"Flash",description:i.getString("JsVideoPlayerFormatsFlashText"),selected:u=="flash"},officemix:{label:"Office Mix",description:i.getString("JsVideoPlayerFormatsOfficeMixText"),selected:u=="officemix"}},e=n(".format-types",self.overlayContentEl).html(),o=["<li>",'<a href="'+s.basePageUrl()+"?format="+r+'" class="'+(f[r].selected?"selected":"")+'">','<span class="icon">'+(f[r].selected?">":"")+"<\/span>",f[r].label,"<\/a>","<p>"+f[r].description+"<\/p>","<\/li>"].join("");n(".format-types",self.overlayContentEl).html(e+o)}},v=function(){self.formatsLinkEl.removeClass("selected");self.formatsLinkEl.blur();l()},o=function(){self.queueLinkEl.removeClass("selected");self.queueLinkEl.blur();self.queueCloseLinkEl.parent("div").hide()},g=function(){var i,t;for(n(window).off("beforeunload.videoOptions"),self.overlayEl&&n(".close",self.overlayEl).off("click"),self.embedLinkEl&&self.embedLinkEl.off("click"),self.formatsLinkEl&&self.formatsLinkEl.off("click"),self.queueLinkEl&&self.queueLinkEl.off("click"),self.queueCloseLinkEl&&self.queueCloseLinkEl.off("click"),i=h,t=0;t<i.length;t++)i[t]&&i[t].fail()};t.videoOptions={refresh:function(){if(self.videoOptionsEl=n(".video-options"),!(self.videoOptionsEl.length<1)){self.overlayEl=n(".overlay",self.videoOptionsEl);self.overlayContentEl=n(".overlay-content",self.overlayEl);self.embedLinkEl=n("a.embed",self.videoOptionsEl);self.formatsLinkEl=n("a.formats",self.videoOptionsEl);self.queueLinkEl=n("a.queue",self.videoOptionsEl);self.queueLoginEl=n(".queue-login",self.videoOptionsEl);self.queueCloseLinkEl=n(".queue-form .close",self.videoOptionsEl);n(window).on("beforeunload.videoOptions",g);n(".close",self.overlayEl).off("click").on("click",function(){return a(),v(),!1});self.embedLinkEl.off("click").on("click",function(){return b(),!1});self.formatsLinkEl.off("click").on("click",function(){return d(),!1});self.queueLinkEl.off("click").on("click",function(){return y(),!1});self.queueCloseLinkEl.off("click").on("click",function(){return o(),!1})}}}})(jQuery);
(function(n){"use strict";var t=ch9.functions,r=t.helpers,f=t.Resources,e={background:"#333",height:"540",width:"960",isEmbed:window.location.href.indexOf("/player")>-1},o={webvtt:"WebVTT"},i={smooth:"smooth",progressive:"progressive",flash:"flash",html5:"html5",officemix:"officemix",auto:"auto"},u=t.userAgent&&t.userAgent.isIOS()?"pagehide":"beforeunload",s=function(){var s=this,c=function(){var n=l();if(!s.player)return!1;s.player.playerPreference!=i.officemix||t.officemixPresenter.haveVideo||(s.player.playerPreference=i.auto);s.player.playerPreference==i.auto&&t.officemixPresenter.haveVideo&&(s.player.playerPreference=i.officemix);switch(s.player.playerPreference){case i.officemix:return t.officemixPresenter.isPlayPossible&&(n=t.officemixPresenter.create(n)),h(n),!1;case i.flash:return t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),h(n),!1;case i.progressive:case i.smooth:return t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),h(n),!1;case i.html5:case i.auto:return t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),h(n),!1}return h(n),!0},h=function(i){if(i&&i!=""&&s.playButton&&s.playerGoesHere)if(t.rotator&&t.rotator.hardStop(),s.playButton.off("click.player").hide(),s.playerGoesHere.css("display","block").html(i),t.userAgent.isIOS()){var r=n("video.Player",s.playerGoesHere);r&&r[0]&&typeof r[0].play=="function"&&r[0].play()}else s.playerContainer.append(n("<div>").addClass("progress large circles")),t.Spinner=new t.ProgressControlConstructor(n(".progress",s.playerContainer)),t.Spinner.show()},l=function(){ch9.functions.playerPresenter.hideSpinner=function(){function t(){ch9.functions.Spinner&&ch9.functions.Spinner.hide()}var n=document.createElement("img");n.onload=t;n.src="/styles/images/1998/shim.gif";n.style.display="block"};var n='<p><a href="'+s.defaultVideoUrl+'">'+f.getString("JsVideoPlayerClickToStart")+'<\/a><\/p><p><a href="//channel9.msdn.com/Blogs/Help/How-to-watch-videos" target="_blank">'+f.getString("JsVideoPlayerHowToWatch")+"<\/a><\/p>";return s.player&&s.player.width>600&&(n+=t.officemixPresenter?t.officemixPresenter.getErrorMessage():"",n+=t.html5Presenter?t.html5Presenter.getErrorMessage():"",n+=t.silverlightPresenter?t.silverlightPresenter.getErrorMessage():"",n+=t.flashPresenter?t.flashPresenter.getErrorMessage():""),'<div class="error">'+n+'<script type="text/javascript">ch9.functions.playerPresenter.hideSpinner();<\/script><\/div>'},a=function(){e.isEmbed&&parent.postMessage("play button clicked","*")};return{isVideoPlaying:function(){return t.VideoPlayer&&t.VideoPlayer.isReady()},remove:function(){n(window).off(u+".player").off("hashchange.player");t.Ch9Conviva&&typeof t.Ch9Conviva!="undefined"&&(t.Ch9Conviva.remove(),delete t.Ch9Conviva);t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&(r.updateProgressCookie(s.episode.length),t.Services&&t.Services.addVideoProgress(s.episode,s.user,!0),t.VideoPlayer.remove(),delete t.VideoPlayer);t.Channel9Html5Player&&typeof t.Channel9Html5Player!="undefined"&&(t.Channel9Html5Player.remove(),delete t.Channel9Html5Player);n("iframe.Player").attr("src","");n(".Player",s.playerContainer).empty().remove();s.playButton&&s.playButton.off("click.player")},refresh:function(){var l,h,f;if((this.remove(),s.playerContainer=n(".featured li.active").length>0?n(".featured li.active .playerContainer"):n(".playerContainer"),!(s.playerContainer.length<1))&&(s.playerGoesHere=n(".playerGoesHere",s.playerContainer),s.playButton=n("a.video",s.playerContainer),!(s.playButton.length<1))&&(l=s.playButton.css("background-image").substring(4,s.playButton.css("background-image").length-1).replace(/"/g,"")||"",h=n("ul.mediacaptions a",s.playerContainer).map(function(){var t=n(this);return{url:t.attr("href"),format:t.attr("rel"),language:t.data("language"),label:t.data("label"),isdefault:!1}}).get(),h=n.grep(h,function(n){return typeof o[n.format]!="undefined"}).sort(function(n,t){return n.language.toLowerCase().localeCompare(t.language.toLowerCase())}),f=s.playButton.data("player"),f.defaultVideoUrl=s.playButton.attr("href"),f.container=s.playerContainer,f.height=s.playerContainer.height(),(f.height<1||!f.height)&&(f.height=s.playerContainer.find(".playerGoesHere").height()),f.width=s.playerContainer.width(),f.playerPreference=i[f.playerPreference]||i.html5,f.language=r.languages[f.language]?f.language:"",f.isSecure=f.isSecure&&f.isSecure.toString().toLowerCase()=="true",s.player=n.extend({},e,f),s.player)&&(s.episode=s.playButton.data("episode"),s.episode)){s.episode.captions=h;s.episode.contentId=s.episode.contentId.replace(/-/g,"");s.episode.images={playerPreview:l};s.episode.length=r.getDuration(s.episode.length);s.episode.isMVA=s.episode.isMVA&&s.episode.isMVA.toString().toLowerCase()=="true";s.user=s.playButton.data("user");s.user.isLoggedIn=s.user&&s.user.isLoggedIn&&s.user.isLoggedIn.toString().toLowerCase()=="true";s.user.name=n("body").data("username");s.user||(s.user={isLoggedIn:!1,name:""});t.html5Presenter=new t.Html5PresenterConstructor(s.player,s.episode,s.user);t.silverlightPresenter=new t.SilverlightPresenterConstructor(s.player,s.episode,s.user);t.flashPresenter=new t.FlashPresenterConstructor(s.player,s.episode,s.user);t.officemixPresenter=new t.OfficemixPresenterConstructor(s.player,s.episode,s.user);t.videoOptions&&typeof t.videoOptions!="undefined"&&t.videoOptions.refresh();s.playButton.show().off("click.player").on("click.player",function(){return a(),c()});n(window).off(u+".player").on(u+".player",this.remove).off("hashchange.player").on("hashchange.player",this.checkToStartPlayer)}},checkToStartPlayer:function(){var f=r.getAutoPlayFromUrl(),e=r.getScrollToVideoFromUrl(),u=r.getStartTimeObjFromUrl(),o=r.getStartTimeObjFromCookie(),h=r.getCaptionLanguageFromUrl(),i;(s.episode&&s.episode.captions&&(i=n.grep(s.episode.captions,function(n){return n.language==h})[0],i&&(i.isdefault=!0)),s.startTime=u.seconds>0?u:o,f||s.startTime&&s.startTime.seconds&&!(s.startTime.seconds<=0))&&(t.VideoPlayer?t.VideoPlayer.seek(s.startTime):c(),e?r.scrollToVideo():r.scrollToVideoTitle())},getEmbedCode:function(n,t,u,f,e){var h=s.player.height,c=s.player.width,l,o;t&&!isNaN(t)&&(c=t,h=Math.round(t*.5625));l=r.basePageUrl().replace(/http:\/\//g,"//");o=["<iframe",' src="'+l+'/player{FORMAT}{LANGUAGE}{AUTOPLAY}{TIMECODE}"',' width="'+c+'"',' height="'+h+'"'," allowFullScreen",' frameBorder="0"',"><\/iframe>"].join("");switch(n){case i.smooth:case i.progressive:case i.flash:case i.html5:case i.officemix:o=o.replace("{FORMAT}","?format="+n);break;case"auto":default:o=o.replace("{FORMAT}","")}return o=u?o.indexOf("#")>-1?o.replace("{LANGUAGE}","&ccLang="+u):o.replace("{LANGUAGE}","#ccLang="+u):o.replace("{LANGUAGE}",""),o=e?o.indexOf("#")>-1?o.replace("{TIMECODE}","&time="+e):o.replace("{TIMECODE}","#time="+e):o.replace("{TIMECODE}",""),f&&!e?o.indexOf("#")>-1?o.replace("{AUTOPLAY}","&autoplay"):o.replace("{AUTOPLAY}","#autoplay"):o.replace("{AUTOPLAY}","")},getContainer:function(){return s.playerContainer},getDefaultVideoUrl:function(){return s.player.defaultVideoUrl},getCaptions:function(){return s.episode.captions},getDuration:function(){return s.episode.length},getStartTime:function(){return s.startTime}}};n(function(){r&&r.hasPlayerPage()&&(t.playerPresenter=new s,t.playerPresenter.refresh(),t.playerPresenter.checkToStartPlayer())})})(jQuery);
(function(){"use strict";var t=ch9.functions,i=t.helpers,n=i.debug;t.VideoPlayerConstructor=function(t,i){this.type=t;this.target=i;var r,u=function(){clearTimeout(r)};return{target:this.target,play:function(){this.targetPlay&&typeof this.targetPlay=="function"&&this.targetPlay()},pause:function(){this.targetPause&&typeof this.targetPause=="function"&&this.targetPause()},stop:function(){this.targetStop&&typeof this.targetStop=="function"&&this.targetStop()},getPosition:function(){try{return this.targetGetPosition&&typeof this.targetGetPosition=="function"?this.targetGetPosition():0}catch(t){return n&&console.log("error getting video position: "+t),0}},seek:function(t){if(!t||!t.seconds){n&&console.log("seek has no time");return}var i=this,e=10,u=0,f=function(){if(u>e){clearTimeout(r);return}u++;try{i.targetCanSeek&&typeof i.targetCanSeek=="function"&&i.targetCanSeek(t.seconds)?(n&&console.log("video ready, setting SeekToPosition or currentTime: "+t.seconds),i.targetSeek&&typeof i.targetSeek=="function"&&i.targetSeek(t.seconds),t.paused&&i.targetPause&&typeof i.targetPause=="function"&&i.targetPause()):(r=setTimeout(f,1e3),n&&console.log("video not ready, trying again"))}catch(o){n&&console.log("error occurred while seeking: "+o)}};f()},isPaused:function(){return this.targetIsPaused&&typeof this.targetIsPaused=="function"?this.targetIsPaused():!1},isReady:function(){return this.targetIsReady&&typeof this.targetIsReady=="function"?this.targetIsReady():!1},remove:function(){u();this.targetRemove&&typeof this.targetRemove=="function"&&this.targetRemove()}}}})();
var swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var r,i,u,f,e=a.length,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}();
(function(n){"use strict";var t=ch9.functions,r=t.helpers,i=t.Resources,u=r&&r.debug,f={movie:"/scripts/smp/StrobeMediaPlayback.swf",version:"10.1.0"},e={Mp4High:"mp4",Mp4Med:"mp4",Mp4:"mp4"},o={Mp4High:{order:0},Mp4Med:{order:1},Mp4:{order:2}};t.FlashPresenterConstructor=function(s,h,c){var l=this,a=t.playerPresenter,v;return this.player=n.extend({},f,s),this.episode=h,this.user=c,this.videos=n("ul.flash a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),this.haveDoneSeek=!1,v=function(n){var t=[],r,u;if(t.push('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),t.push(">"),n.movie!=null&&t.push('<param name="movie" value="'+n.movie+'"/>'),r="",n.flashvars!=null&&typeof n.flashvars=="object"){for(u in n.flashvars)r+=(r!=""?"&":"")+u+"="+n.flashvars[u];t.push('<param name="flashvars" value="'+r+'"/>')}return t.push("<!--[if !IE]>-->"),t.push('<object type="application/x-shockwave-flash"'),n.movie!=null&&t.push(' data="'+n.movie+'"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),t.push(">"),r!=""&&t.push('<param name="flashvars" value="'+r+'"/>'),t.push("<!--<![endif]-->"),n.dofallback&&n.src!=null&&t.push('<p><a href="'+n.src+'">'+i.getString("JsVideoPlayerClickToStart")+"<\/a><\/p>"),t.push("<!--[if !IE]>-->"),t.push("<\/object>"),t.push("<!--<![endif]-->"),t.push("<\/object>"),t.join("")},{playerId:"flashPlayer",haveVideo:l.videos.length>0,isPlayPossible:!t.userAgent||t.userAgent.flashPlayerSupported(),getErrorMessage:function(){var n="",t="<h3>Flash<\/h3>";return!this.isPlayPossible&&this.haveVideo?n+=t+"<p>"+i.getString("JsVideoPlayerFlashNotSupported")+"<\/p>":this.isPlayPossible&&!this.haveVideo?n+=t+"<p>"+i.getString("JsVideoPlayerFlashNoVideo")+"<\/p>":this.isPlayPossible&&this.haveVideo&&(n+=t+"<p>"+i.getString("JsVideoPlayerFlashNoPlugin")+"<\/p>"),n},create:function(t){var u=n.grep(l.videos,function(n){return e[n.type]}),h,c;u=u.sort(r.sortVideosBy(o));var f=u&&u.length>0?u[0]:{url:""},s={attributes:{allowfullscreen:!0,allowscriptaccess:"always","class":"Player"},flashvars:{poster:l.episode.images.playerPreview,src:f.url,autoPlay:!0,javascriptCallbackFunction:"ch9.functions.flashPresenter.flashLoaded"},dofallback:!0,playerId:this.playerId,fallback:t},i={};return!f||!f.url?t:(l.episode.captions&&l.episode.captions.length>0&&(s.tracks=l.episode.captions),n.extend(i,l.player,s),l.episode.plyCaptionStreamId&&(h={verbose:!0,controlBarAutoHide:!0,src_namespace:"http://www.akamai.com/advancedstreamingplugin/1.0",plugin_AkamaiAdvancedStreamingPlugin:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.0/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",plugin_plymedialive:"http://static.plymedia.com/players/default/plymedialivepluginaaspv3.swf",plymedialive_namespace:"http://www.plymedia.com/ns/livesyncplugin",plymedialive_autocreate:!0,src_namespace_plymedialive:"http://www.plymedia.com/ns/livesyncplugin",src_plymedialive_videoid:l.episode.plyCaptionStreamId},n.extend(i.flashvars,h),i.attributes.name="strobeMediaPlayback"),c=swfobject&&i.version?swfobject.hasFlashPlayerVersion(i.version):!0,!c)?i.fallback:(ch9.functions.flashPresenter.loadShim=function(){function r(){swfobject.embedSWF(i.movie,i.playerId,i.width,i.height,i.version,null,i.flashvars,null,i.attributes,null);n("#flashLoader",l.player.container).remove()}var t=document.createElement("img");t.onload=r;t.src="/styles/images/1998/shim.gif";t.style.display="block"},'<div id="'+this.playerId+'"><\/div><div id="flashLoader"><script type="text/javascript">ch9.functions.flashPresenter.loadShim();<\/script><\/div>')},setPlayer:function(i){t.VideoPlayer=new t.VideoPlayerConstructor("flash",i);var r=t.VideoPlayer,f={targetPlay:function(){this.target&&this.target.play2&&typeof this.target.play2=="function"&&this.target.play2()},targetPause:function(){this.target&&this.target.pause&&typeof this.target.pause=="function"&&this.target.pause()},targetStop:function(){this.target&&this.target.stop2&&typeof this.target.stop2=="function"&&this.target.stop2()},targetGetPosition:function(){return this.target?this.target.getCurrentTime():null},targetIsPaused:function(){return this.target?this.target.getPaused():!1},targetIsReady:function(){return this.target?this.target.getState()!="ready":!1},targetSeek:function(n){this.target&&this.target.seek(n)},targetCanSeek:function(n){return this.target?this.target.canSeekTo&&typeof this.target.canSeekTo=="function"?this.targetIsReady()&&this.target.canSeekTo(n):!1:!1}};n.extend(r,f);try{r.target.addEventListener("currentTimeChange","ch9.functions.flashPresenter.onCurrentTimeChange");r.target.addEventListener("mediaPlayerStateChange","ch9.functions.flashPresenter.onMediaPlayerStateChange")}catch(e){u&&console.log("error attaching events to flash player: "+e)}t.Spinner&&t.Spinner.hide()},onCurrentTimeChange:function(){if(!l.haveDoneSeek){var n=a.getStartTime();n.seconds>0&&(u&&console.log("seeking to start time: "+n.seconds),t.VideoPlayer.seek(n));l.haveDoneSeek=!0}t.Services&&t.VideoPlayer&&(t.Services.addVideoProgress(l.episode,l.user),t.Services.sendAnalytics(l.episode,"flash"))},onMediaPlayerStateChange:function(n){t.Services&&t.VideoPlayer&&n=="paused"&&t.Services.addVideoProgress(l.episode,l.user)},flashLoaded:function(){if(!t||!t.VideoPlayer)try{var n=document.getElementById(this.playerId);this.setPlayer(n)}catch(i){u&&console.log("error loading flash player: "+i)}}}}})(jQuery);
(function(n){"use strict";var t=ch9.functions,u=t.helpers,i=t.Resources,r=u&&u.debug,o={autoplay:!0,controls:!1,useCh9CustomPlayer:!0},f={Mp4Med:"mp4",Mp4High:"mp4",Mp4:"mp4",WebM:"webm"},s={Mp4Med:{order:0},WebM:{order:1},Mp4High:{order:2},Mp4:{order:3}},e={Mp4:"Low",Mp4Med:"Medium",Mp4High:"High",WebM:"Medium"};t.Html5PresenterConstructor=function(h,c,l){var a=this,y=t.playerPresenter,v;return this.player=n.extend({},o,h),this.episode=c,this.user=l,this.videos=n("ul.html5 a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),t.userAgent&&(t.userAgent.isIOS()&&(this.player.controls=!0),t.userAgent.isIE10()&&this.player.isEmbed&&(this.player.useCh9CustomPlayer=!1,this.player.controls=!0)),v=function(n,t){var r=[],h,s,u;if(r.push("<video"),t.id!=null&&r.push(' id="'+t.id+'"'),t["class"]!=null&&r.push(' class="'+t["class"]+'"'),t.poster!=null&&r.push(' poster="'+t.poster+'"'),t.width!=null&&r.push(' width="'+t.width+'"'),t.height!=null&&r.push(' height="'+t.height+'"'),t.controls!=null&&t.controls==!0&&r.push(" controls"),t.preload!=null&&t.preload==!0&&r.push(" preload"),t.autoplay!=null&&t.autoplay==!0&&r.push(" autoplay"),t.loop!=null&&t.loop==!0&&r.push(" loop"),r.push(' onerror="ch9.functions.html5Presenter.fallback(this);"'),r.push(' oncanplay="ch9.functions.html5Presenter.html5Loaded(this);"'),r.push(">"),n&&n.length)for(u=0;u<n.length;u++){var o=n[u],c=typeof f[o.type]!="undefined"?f[o.type]:video.type,l=typeof e[o.type]!="undefined"?e[o.type]:o.type;r.push('<source src="'+o.url+'" type="video/'+c+'" data-quality="'+l+'" onerror="ch9.functions.html5Presenter.fallback(this);" />')}if(!t.useCh9CustomPlayer&&t.tracks&&t.tracks.length)for(h=t.tracks,u=0;u<h.length;u++)s=h[u],r.push('<track label="'+s.label+'" src="'+s.url+'" kind="subtitles" srclang="'+s.language+'"'),s.isdefault&&r.push(" default"),r.push("/>");return ch9.functions.html5Presenter.fallbackHtml=t.fallbackHtml!=null?t.fallbackHtml:'<div class="error"><p><a href="'+n[0].url+'">'+i.getString("JsVideoPlayerClickToStart")+"<\/a><\/p><\/div>",r.join("")},{haveVideo:a.videos.length>0,isPlayPossible:!t.userAgent||t.userAgent.html5playerSupported(),fallbackHtml:'<div class="error">'+i.getString("JsVideoPlayerError")+"<\/div>",getErrorMessage:function(){var n="",t="<h3>HTML5<\/h3>";return this.isPlayPossible&&!this.haveVideo?n+=t+"<p>"+i.getString("JsVideoPlayerHTML5NoVideo")+"<\/p>":!this.isPlayPossible&&this.haveVideo&&(n+=t+"<p>"+i.getString("JsVideoPlayerHTML5NotSupported")+"<\/p>"),n},create:function(t){var i=n.grep(a.videos,function(n){return f[n.type]}),e,r;return(i=i.sort(u.sortVideosBy(s)),!i||i.length==0)?t:(e={"class":"Player",poster:a.episode.images.playerPreview,dofallback:!0,fallbackHtml:t},r={},n.extend(r,a.player,e),a.episode.captions&&a.episode.captions.length>0&&(r.tracks=a.episode.captions),v(i,r))},setPlayer:function(i){var u,o,e,f;t.VideoPlayer=new t.VideoPlayerConstructor("html5",i);u=t.VideoPlayer;o={targetPlay:function(){this.target&&this.target.play()},targetPause:function(){this.target&&this.target.pause()},targetStop:function(){this.target&&this.target.stop()},targetGetPosition:function(){return this.target?this.target.currentTime:null},targetIsPaused:function(){return this.target?this.target.paused:!1},targetIsReady:function(){return this.target?this.target.readyState>=3:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&(this.target.play(),this.target.currentTime=n)},targetRemove:function(){this.target&&(this.target.pause(),this.target.src="",this.target.ontimeupdate=null,this.target.onpause=null,this.target.onerror=null)}};n.extend(u,o);try{a.player.useCh9CustomPlayer&&t.Channel9Html5PlayerConstructor&&(u.target.controls=!1,t.Channel9Html5Player=new t.Channel9Html5PlayerConstructor(a.player,a.episode,a.user),u=n.extend(u,t.Channel9Html5Player));t.Ch9ConvivaConstructor&&(e={assetName:a.episode.contentId,duration:a.episode.length,isLive:!1,playerName:"html5 website player",source:u.target.currentSrc,c9Id:a.user.c9Id,mrcId:a.user.mrcId},a.player.isSecure&&(e.serviceUrl="https://livepass.conviva.com"),t.Ch9Conviva=new t.Ch9ConvivaConstructor(e,i));f=y.getStartTime();f.seconds>0&&(r&&console.log("seeking to start time: "+f.seconds),u.seek(f));n(u.target).on("timeupdate",function(){t.Services&&t.VideoPlayer?(t.Services.sendAnalytics(a.episode,"html5"),t.Services.addVideoProgress(a.episode,a.user)):n(u.target).off("timeupdate")});n(u.target).on("pause",function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(a.episode,a.user):n(u.target).off("pause")})}catch(s){r&&console.log("error attaching events to html5 player: "+s)}t.Spinner&&t.Spinner.hide()},fallback:function(i){if(i){if(n(i).is("source")&&(i=n(i).parent("video").get(0)),i.hasChildNodes())while(i.hasChildNodes())if(i.firstChild){var u=n(i.firstChild);u.is("source")&&u.remove()}if(i.networkState&&i.networkState==i.NETWORK_NO_SOURCE){try{n(i).parent().append(t.html5Presenter.fallbackHtml);n(i).remove()}catch(f){r&&console.log("Error showing fallback: "+JSON.stringify(f))}t.Spinner&&t.Spinner.hide()}}},html5Loaded:function(n){if(n&&(!t||!t.VideoPlayer))try{t.html5Presenter.setPlayer(n)}catch(i){r&&console.log("error loading html5 player: "+i);n.controls=!0;t.Spinner&&t.Spinner.hide()}}}}})(jQuery);
(function(n){"use strict";var i=ch9.functions,t=i.Resources,r=i.helpers.debug;i.Channel9Html5PlayerConstructor=function(u,f,e){r&&console.log("starting channel9Html5Player");var o=this,s=i.helpers.Key,d={High:{order:0},Medium:{order:1},Low:{order:2}};if(this.player=u,this.episode=f,this.user=e,this.pagePromises=[],this.videoPlayer=i.VideoPlayer,this.videoElement=this.videoPlayer.target,this.playerGoesHere=n(".playerGoesHere",this.player.container),this.episode.length=this.videoElement.duration,this.tracks=this.episode.captions,this.hasQueue=!1,this.showCaptions=!1,this.captionsClosedByScript=!1,this.markers=null,this.language=o.player.language,this.tracks.length){var g=n.grep(this.tracks,function(n){return n.isdefault==!0})[0],pt=n.grep(this.tracks,function(n){return n.language==o.player.language})[0],nt=this.tracks[0];typeof g!="undefined"?(this.showCaptions=!0,this.language=g.language):typeof pt=="undefined"&&typeof nt!="undefined"&&(this.language=nt.language)}this.permalink=window.location.href.indexOf("/player")>-1?window.location.href.split("/player")[0]:"http://channel9.msdn.com/";this.source=n("video source[src='"+this.videoElement.currentSrc+"']",this.playerGoesHere);this.qualities=n("video source:not([type='video/webm'])",this.playerGoesHere).map(function(){return{label:n(this).data("quality"),src:n(this).attr("src")}}).get().sort(function(n,t){try{return(n=n.label,t=t.label,n===t)?0:d[n].order<d[t].order?-1:1}catch(i){return 1}});this.quality=this.source.data("quality");this.speeds=[{label:"Fast",value:1.5},{label:"Normal",value:1},{label:"Slow",value:.5}];this.speed=this.videoElement.playbackRate;this.controlsTimer=null;this.volumeSliderTimer=null;this.detailsTimer=null;this.addedEndOfVideo=!1;this.currentTime=0;var wt=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(Math.floor(o.videoElement.currentTime)>=o.episode.length?o.videoElement.currentTime=0:o.videoElement.paused?o.videoPlayer.play():o.videoPlayer.pause())},bt=function(){var t=n(".controls .seek.control",o.playerGoesHere);t.data("dragging",!0)},kt=function(t){var i=n(".controls .seek.control",o.playerGoesHere);i.data("dragging")==!0&&tt(t);t&&t.stopPropagation()},dt=function(){var t=n(".controls .seek.control",o.playerGoesHere);t.data("dragging")==!0&&t.data("dragging",!1)},tt=function(n){var i=n?n.keyCode:null,t=o.videoElement.currentTime,u,e,f;if(i)switch(i){case s.leftArrow:case s.downArrow:t=o.videoElement.currentTime--;break;case s.rightArrow:case s.upArrow:t=o.videoElement.currentTime++;break;case s.pageDown:t=o.videoElement.currentTime-30;break;case s.pageUp:t=o.videoElement.currentTime+30;break;case s.home:t=1;break;case s.end:t=o.episode.length;break;default:u=0;i>=s.num0&&i<=s.num9?u=s.num0:i>=s.numPad0&&i<=s.numPad9&&(u=s.numPad0);u>0&&(t=o.episode.length*((i-u)/10))}else e=n.pageX-hr(),f=e/k(),t=o.episode.length*f,r&&console.log("percentage: "+f);t=Math.max(1,Math.min(o.episode.length,t));try{o.videoElement.currentTime=t}catch(h){r&&console.log("error setting current time: "+t)}n&&n.stopPropagation()},gt=function(){var t,i;at();t=n(".captionRegion",o.playerGoesHere);o.showCaptions&&o.markers&&o.markers.length?(i=n.grep(o.markers,function(n){return n.begin<=o.videoElement.currentTime&&n.end>=o.videoElement.currentTime})[0],i&&(t.is(":hidden")&&t.show(),n(".captions",t).html(i.content))):t.hide()},ni=function(n){var t=n?n.keyCode:null,i;t&&t!=s.enter&&t!=s.space||(i=o.videoElement.currentTime-30,o.videoPlayer.seek({seconds:Math.max(Math.min(o.episode.length,i),1)}))},ti=function(){n(this).addClass("override").text("-30s")},ii=function(){n(this).removeClass("override").text(i.helpers.getTimePieces(Math.floor(o.videoElement.currentTime)))},ri=function(n){var t=n?n.keyCode:null,i;t&&t!=s.enter&&t!=s.space||(i=o.videoElement.currentTime+30,o.videoPlayer.seek({seconds:Math.max(Math.min(o.episode.length,i),1)}))},ui=function(){n(this).addClass("override").text("+30s")},fi=function(){n(this).removeClass("override").text(i.helpers.getTimePieces(Math.floor(o.episode.length-Math.min(o.episode.length,o.videoElement.currentTime))))},ei=function(t){var i=t?t.keyCode:null,h=n(".controls .volume.control"),e=n(".volumeSlider",h),u=o.videoElement.volume,r,f;if(i&&i!=s.enter&&i!=s.space||(o.videoElement.muted?(o.videoElement.muted=!1,e.fadeIn("fast")):e.is(":hidden")?e.fadeIn("fast"):(o.videoElement.muted=!0,e.fadeOut("slow"),h.data("active",!1),o.volumeSliderTimer&&clearTimeout(o.volumeSliderTimer))),i&&i!=s.enter&&i!=s.space){r=u;switch(i){case s.leftArrow:case s.downArrow:r=u-.05;break;case s.rightArrow:case s.upArrow:r=u+.05;break;case s.pageDown:r=u-.1;break;case s.pageUp:r=u+.1;break;case s.home:r=1;break;case s.end:r=0;break;default:f=0;i>=s.num0&&i<=s.num9?f=s.num0:i>=s.numPad0&&i<=s.numPad9&&(f=s.numPad0);f>0&&(r=(i-f)/10)}o.videoElement.volume=Math.max(0,Math.min(1,r))}},it=function(){n(this).data("active",!0)},rt=function(){n(this).data("active")==!0&&(n(this).data("active",!1),oi())},oi=function(){o.volumeSliderTimer&&clearTimeout(o.volumeSliderTimer);o.volumeSliderTimer=setTimeout(si,3e3)},si=function(){var t=n(".controls .volume.control",o.playerGoesHere),i=n(".volumeSlider",t);t.data("active")||i.is(":hidden")||(t.data("dragging",!1),i.fadeOut("slow"))},hi=function(){var t=n(".controls .volume.control",o.playerGoesHere);t.data("dragging",!0)},ci=function(t){var i=n(".controls .volume.control",o.playerGoesHere);if(i.data("dragging")==!0){var r=n(".volumeSlider",i),u=n(".handle",r),f=u.offset().top-r.offset().top,e=(100-f)/100;o.videoElement.volume=e}t&&t.stopPropagation()},li=function(){var t=n(".controls .volume.control",o.playerGoesHere);t.data("dragging")==!0&&t.data("dragging",!1)},ai=function(t){if(t){var r=n(".controls .volume.control .volumeSlider",o.playerGoesHere),u=t.pageY-r.offset().top,i=(100-u)/100;i=Math.max(0,Math.min(1,i));o.videoElement.volume=i;t.stopPropagation()}},vi=function(){var i=n(".controls .volume.control",o.playerGoesHere),f=n(".volumeSlider",i),e=n(".handle",f),r=f.height()-e.height(),u=Math.floor(r-r*o.videoElement.volume);u=Math.max(Math.min(u,r),0);e.css({top:u+"px"});o.videoElement.muted?i.addClass("muted").attr({title:t.getString("JsVideoPlayerVolumeMuted"),"aria-valuenow":"0","aria-valuetext":"0%"}):i.removeClass("muted").attr({title:t.getString("JsVideoPlayerVolume"),"aria-valuenow":o.videoElement.volume,"aria-valuetext":Math.round(o.videoElement.volume*100)+"%"})},ut=function(t){var i=t?t.keyCode:null,r=n("details",n(this));i&&i!=s.enter&&i!=s.space||(r.is(":hidden")?yi(r):ft(r));t&&t.stopPropagation()},yi=function(t){t&&t.is(":hidden")&&(n("a.button",t).each(function(t,i){n(i).attr("tabIndex","0")}),t.attr("open","open"),t.fadeIn("fast"),t.parent(".control.button").data("active",!1))},ft=function(t){t&&(t.is(":hidden")||(et(n(".selector",t)),n("a.button",t).each(function(t,i){n(i).attr("tabIndex","-1")}),t.removeAttr("open"),t.fadeOut("slow"),t.parent(".control.button").data("active",!1),o.detailsTimer&&clearTimeout(o.detailsTimer)))},pi=function(t){t&&(t.addClass("active"),n(".dropdown a.button",t).each(function(t,i){n(i).attr("tabIndex","0")}))},et=function(t){t&&(t.removeClass("active"),n(".dropdown a.button",t).each(function(t,i){n(i).attr("tabIndex","-1")}))},ot=function(){n(this).parent(".control.button").data("active",!0)},st=function(){var t=n(this);t.parent(".control.button").data("active")==!0&&(t.parent(".control.button").data("active",!1),wi(t))},wi=function(n){o.detailsTimer&&clearTimeout(o.detailsTimer);o.detailsTimer=setTimeout(ft.bind(this,n),3e3)},ht=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(o.showCaptions=!0,v(),n&&n.stopPropagation())},bi=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(o.showCaptions=!1,v(),n&&n.stopPropagation())},ki=function(t){var u=t?t.keyCode:null,f=n(".controls .closedCaptions.button",o.playerGoesHere),i,r;u&&(u==s.leftArrow||u==s.rightArrow)?f.focus():(i=n("details .selector",f),i.hasClass("active")?(et(i),r=n(this).attr("lang"),r&&r!=o.language&&(o.showCaptions=!0,o.language=r,v())):pi(i));t&&t.stopPropagation()},v=function(){var u=n(".controls .closedCaptions.control",o.playerGoesHere),e=n(".cc a.off.button",u),s=n(".cc a.on.button",u),c=n("details .selector .dropdown",u),h,t,f;if(o.showCaptions&&o.language){if(h=n("a."+o.language+".button",c),t=n.grep(o.tracks,function(n){return n.language==o.language})[0],!t||!t.url)return;f=i.Services.Channel9DataSource({source:t.url});o.pagePromises.push(f);n.when(f).then(function(n){if(n){var t=new i.WebVTTMarkerParser;o.markers=t.parseMarkerCollection(n[0])}},function(n){r&&console.log("error getting caption file: "+JSON.stringify(n))});h.addClass("selected").attr("aria-pressed","true").siblings("a.button").removeClass("selected").attr("aria-pressed","false");s.addClass("selected").attr("aria-pressed","true");e.removeClass("selected").attr("aria-pressed","false")}else s.removeClass("selected").attr("aria-pressed","false"),e.addClass("selected").attr("aria-pressed","true")},di=function(t){var i=t?t.keyCode:null,r;if(!i||i==s.enter||i==s.space){if(r=n(this).data("src"),r!=o.source.attr("src")){var u=n(this).data("quality"),f=n(".controls .settings.control .quality",o.playerGoesHere),e=o.videoElement.currentTime;o.source.attr("src",r);o.videoElement.load();o.videoPlayer.seek({seconds:e});n("a."+u+".button",f).addClass("selected").attr("aria-pressed","true").siblings("a.button").removeClass("selected").attr("aria-pressed","false")}t&&t.stopPropagation()}},gi=function(t){var r=t?t.keyCode:null,i,u,f;r&&r!=s.enter&&r!=s.space||(i=n(this).data("value"),u=n(this).data("speed"),i!=o.videoElement.playbackRate&&(f=n(".controls .settings.control .speed",o.playerGoesHere),o.videoElement.playbackRate=i,o.speed=i,n("a."+u+".button",f).addClass("selected").attr("aria-pressed","true").siblings("a.button").removeClass("selected").attr("aria-pressed","false")),t&&t.stopPropagation())},y=function(t){var r=t?t.keyCode:null,u;r&&r!=s.enter&&r!=s.space||(u=i.helpers.addQueryStringParam(n(this).attr("href"),"ocid=player"),o.player.isEmbed?window.open(u):window.location.href=u,t&&t.preventDefault())},nr=function(t){var i=t?t.keyCode:null;i&&i!=s.enter&&i!=s.space||(window.open(n(this).attr("href")),t&&t.preventDefault())},h=function(){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return n!=null||o.playerGoesHere.hasClass("fullscreen")},tr=function(){var n=o.playerGoesHere.get(0);return n.requestFullscreen&&typeof n.requestFullscreen=="function"||n.msRequestFullscreen&&typeof n.msRequestFullscreen=="function"||n.mozRequestFullScreen&&typeof n.mozRequestFullScreen=="function"||n.webkitRequestFullscreen&&typeof n.webkitRequestFullscreen=="function"||o.videoElement.webkitEnterFullscreen&&typeof o.videoElement.webkitEnterFullscreen=="function"?!0:!1},ct=function(n){var i=n?n.keyCode:null,t;i&&i!=s.enter&&i!=s.space||(h()?document.exitFullscreen&&typeof document.exitFullscreen=="function"?document.exitFullscreen():document.msExitFullscreen&&typeof document.msExitFullscreen=="function"?document.msExitFullscreen():document.mozCancelFullScreen&&typeof document.mozCancelFullScreen=="function"?document.mozCancelFullScreen():document.webkitExitFullscreen&&typeof document.webkitExitFullscreen=="function"?document.webkitExitFullscreen():(o.playerGoesHere.removeClass("fullscreen"),c()):(t=o.playerGoesHere.get(0),t.requestFullscreen&&typeof t.requestFullscreen=="function"?t.requestFullscreen():t.msRequestFullscreen&&typeof t.msRequestFullscreen=="function"?t.msRequestFullscreen():t.mozRequestFullScreen&&typeof t.mozRequestFullScreen=="function"?t.mozRequestFullScreen():t.webkitRequestFullscreen&&typeof t.webkitRequestFullscreen=="function"?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):o.videoElement.webkitEnterFullscreen&&typeof o.videoElement.webkitEnterFullscreen=="function"?o.videoElement.webkitEnterFullscreen():(o.playerGoesHere.addClass("fullscreen"),c())))},c=function(){var i=n(".controls .fullscreen",o.playerGoesHere);h()?i.addClass("restore").attr({title:t.getString("JsVideoPlayerFullscreenRestore"),"aria-pressed":"true"}):i.removeClass("restore").attr({title:t.getString("JsVideoPlayerFullscreen"),"aria-pressed":"false"});lt()},ir=function(t){var i=t?t.keyCode:null;i&&i==s.escape&&h()&&ct();n(".controls",o.playerGoesHere).fadeIn("fast");p();w();t&&t.preventDefault()},p=function(){n(".controls",o.playerGoesHere).data("active",!0)},w=function(){var t=n(".controls",o.playerGoesHere);t.data("active")==!0&&(t.data("active",!1),ur())},rr=function(){var t=n(".controls"),i=n.grep(n(".control",t),function(t){return n(t).data("active")==!0});i.length||t.data("active")||t.is(":hidden")||(t.fadeOut("slow"),clearTimeout(o.controlsTimer))},ur=function(){o.controlsTimer&&clearTimeout(o.controlsTimer);o.controlsTimer=setTimeout(rr,3e3)},b=function(i,r){i.append(n("<article>").css({backgroundImage:"url("+r.images.large+")"}).append(n("<a>").attr({href:r.permalink,tabIndex:"0",title:r.title}).addClass("playRelated").text(t.getString("JsVideoPlayerPlay")).on("click keydown",y)).append(n("<header>").append(n("<h1>").text(r.title))))},fr=function(){o.player.isEmbed&&n(".endOfVideo .channel9Link",o.playerGoesHere).show();var u=n.when([]),f=n.when([]),e=i.Services.Episodes.getFeaturedData(9);(!o.episode.isMVA||o.episode.relatedApi&&o.episode.relatedApi.trim()!="")&&(f=i.Services.Episodes.getRelatedEpisodes(o.episode.relatedApi,9));!o.player.isEmbed&&o.user.isLoggedIn&&(u=i.Services.Episodes.getQueueData(9));o.pagePromises.push(e);o.pagePromises.push(f);o.pagePromises.push(u);n.when(e,f,u).then(function(i,r,u){var f=9,e;u&&u.length&&(n(".endOfVideo .sections section.queue h1").text(t.getString("JsVideoPlayerWatchQueue")),e=n.grep(u,function(n){return n.contentId.replace(/-/g,"")!=o.episode.contentId}),e.length&&(e.slice(0,4).forEach(function(t){b(n(".endOfVideo .sections section.queue .abstracts",o.playerGoesHere),t)}),o.hasQueue=!0));o.hasQueue&&(f=4);!o.episode.isMVA&&r&&r.length?(n(".endOfVideo .sections section.related h1").text(t.getString("watchRelatedLabel")),n.grep(r,function(n){return n.contentId.replace(/-/g,"")!=o.episode.contentId}).slice(0,f).forEach(function(t){b(n(".endOfVideo .sections section.related .abstracts",o.playerGoesHere),t)})):(n(".endOfVideo .sections section.related h1").text(t.getString("watchFeaturedLabel")),n.grep(i,function(n){return n.contentId.replace(/-/g,"")!=o.episode.contentId}).slice(0,f).forEach(function(t){b(n(".endOfVideo .sections section.related .abstracts",o.playerGoesHere),t)}),n(".endOfVideo .azureMLLink").hide());lr()},function(n){r&&console.log("error getting related videos: "+JSON.stringify(n.responseText))})},er=function(){if(o.currentTime!=o.videoElement.currentTime){o.currentTime=o.videoElement.currentTime;var r=n(".controls .play.control",o.playerGoesHere),f=n(".controls .skipBack.control",o.playerGoesHere),e=n(".controls .skipAhead.control",o.playerGoesHere),u=n(".endOfVideo",o.playerGoesHere),s=o.currentTime,h=Math.floor(o.episode.length-o.currentTime);!o.addedEndOfVideo&&o.episode.length-o.currentTime<=60&&(o.addedEndOfVideo=!0,fr());o.currentTime>=o.episode.length?(r.removeClass("pause").addClass("replay").attr({title:t.getString("JsVideoPlayerReplay")}),s=o.episode.length,h=0,u.show(),o.showCaptions&&(o.showCaptions=!1,o.captionsClosedByScript=!0)):o.videoElement.paused?(r.removeClass("replay").removeClass("pause").attr({title:t.getString("JsVideoPlayerPlay")}),u.hide(),o.captionsClosedByScript&&(o.showCaptions=!0,o.captionsClosedByScript=!1)):(r.removeClass("replay").addClass("pause").attr({title:t.getString("JsVideoPlayerPause")}),u.hide(),o.captionsClosedByScript&&(o.showCaptions=!0,o.captionsClosedByScript=!1));f.hasClass("override")||f.text(i.helpers.getTimePieces(s));e.hasClass("override")||e.text(i.helpers.getTimePieces(h))}},lt=function(){var h=a(),f=or(),t=n(".controls",o.playerGoesHere),g=n(".control.play",t),c=n(".control.volume",t),u=n(".control.seek",t),v=n(".handle",u),y=n(".control.channel9Link",t),p=n(".control.fullscreen",t),e=n(".control.closedCaptions",t),w=n("details",e),s=n(".control.settings",t),b=n("details",s),nt=n(".control.skipAhead",t),tt=n(".control.skipBack",t),d=n(".control.spacer",t),r;n(".control",t).removeClass("hidden");l();d.addClass("hidden");i.userAgent&&i.userAgent.isIOS()&&c.addClass("hidden");o.player.isEmbed&&!tr()&&p.addClass("hidden");!o.tracks.length||f<w.outerHeight(!0)?(e.addClass("hidden"),o.showCaptions=!1):cr();f<b.outerHeight(!0)&&s.addClass("hidden");o.player.isEmbed||y.addClass("hidden");vt();h<l()?(n(".control",t).removeClass("hidden"),u.addClass("hidden"),vt()):(r=k(),i.userAgent&&i.userAgent.isIE9()&&u.css({width:r}),v.css({borderLeftWidth:r+"px",marginLeft:"-"+r+"px"}),at())},at=function(){var u=n(".controls .seek.control",o.playerGoesHere),s=n(".handle",u),f=o.videoElement.currentTime/o.episode.length,t=k()-20,e=Math.floor(t*f);r&&console.log("fullscreen: "+h()+" seek width: "+t+" percentage: "+f+" new left: "+e);s.css({left:Math.max(Math.min(e,t),0)+"px"});u.attr({"aria-valuenow":o.videoElement.currentTime,"aria-valuetext":i.helpers.getTimePieces(o.videoElement.currentTime)})},a=function(){var i=screen.width,u=n(window).width(),f=o.playerGoesHere.width(),t;return(r&&console.log("window width: "+u),h())?(r&&console.log("screen width: "+i),t=Math.max(i,u),r&&console.log("max of screen and window width: "+t),t):(r&&console.log("player width: "+f),f)},or=function(){var t=screen.height,u=n(window).height(),i=o.playerGoesHere.height();return(r&&console.log("window height: "+u),h())?(r&&console.log("screen height: "+t),t):(r&&console.log("player height: "+i),i)},l=function(){var t=0;return n(".controls .control:not(.hidden)",o.playerGoesHere).each(function(i,r){o.player.isEmbed&&h()?t+=n(r).data("width"):(t+=n(r).outerWidth(!0),n(r).data("width",n(r).outerWidth(!0)))}),r&&console.log("visible controls width: "+t),t},sr=function(){var t=0;return n(".controls .control:not(.hidden,.seek)",o.playerGoesHere).each(function(i,u){h()?(t+=n(u).data("width"),r&&console.log(u.className+" data width: "+n(u).data("width"))):(t+=n(u).outerWidth(!0),r&&console.log(u.className+" outerWidth: "+n(u).outerWidth(!0)))}),t},k=function(){var u=n(".controls .control.seek",o.playerGoesHere),t;return h()||i.userAgent&&i.userAgent.isIE9()?(t=a()-sr(),r&&console.log("calculated seek width: "+t),t):(r&&console.log("seek outerwidth: "+u.outerWidth(!0)),u.outerWidth(!0))},hr=function(){var u=n(".controls .control.seek",o.playerGoesHere),t=u.offset().left,i;return h()&&(i=0,u.prevAll(".control:not(.hidden)").each(function(t,u){i+=n(u).data("width");r&&console.log(u.className+" data width: "+n(u).data("width"))}),t=i,r&&console.log("fullscreen offset: "+t)),t},vt=function(){var t=a(),i=n(".controls",o.playerGoesHere),r=n(".control.channel9Link",i),u=n(".control.fullscreen",i),f=n(".control.settings",i),e=n(".control.skipBack",i);t<l()&&r.addClass("hidden");t<l()&&e.addClass("hidden");t<l()&&f.addClass("hidden");t<l()&&u.addClass("hidden")},cr=function(){var i=a(),t=n(".captionRegion",o.playerGoesHere);t.css({fontSize:"16px"});i>=500&&t.css({fontSize:"18px"});i>=700&&t.css({fontSize:"24px"});i>=960&&t.css({fontSize:"26px"});i>=1280&&t.css({fontSize:"32px"})},lr=function(){var t=a(),u=n(".endOfVideo",o.playerGoesHere),i=n(".abstracts article",u),r=n(".sections > section > header > h1",u),f=n(".sections > section article > header > h1",u);i.addClass("hidden").css({width:"48%"});i.slice(0,2).removeClass("hidden");r.css({fontSize:"16px"});f.css({fontSize:"14px"});t>=500&&r.css({fontSize:"26px"});t>=700&&i.css({width:"31%"}).slice(2,6).removeClass("hidden");t>=960&&(r.css({fontSize:"26px"}),i.css({width:"23%"}).slice(6,8).removeClass("hidden"),o.hasQueue&&(n(".endOfVideo .sections section.queue").show(),n(".endOfVideo .abstracts article").css({width:"48%"})));t>=1280&&(r.css({fontSize:"32px"}),f.css({fontSize:"18px"}))},ar=function(){n(".ch9p",o.playerGoesHere).empty().remove();n(o.playerGoesHere).attr("tabIndex","0").on("focus keydown mouseenter mousemove",ir).append(n("<div>").addClass("ch9p").append(n("<section>").addClass("endOfVideo").hide().append(n("<a>").addClass("channel9Link").attr({href:"http://channel9.msdn.com/",tabIndex:"0"}).text(t.getString("JsVideoPlayerWatchChannel9")).on("click keydown",y).hide()).append(n("<div>").addClass("sections").append(n("<section>").addClass("related").append(n("<header>").append(n("<h1>"))).append(n("<div>").addClass("abstracts")).append(n("<a>").addClass("azureMLLink").attr({href:"http://azure.com/ml",tabIndex:"0"}).text(t.getString("JsVideoPlayerAzureMachineLearning")).on("click keydown",nr))).append(n("<section>").addClass("queue").hide().append(n("<header>").append(n("<h1>"))).append(n("<div>").addClass("abstracts"))))).append(n("<div>").addClass("captionRegion").hide().append(n("<div>").addClass("captions").attr({"aria-label":t.getString("JsVideoPlayerClosedCaptions"),"aria-live":"assertive","aria-atomic":"true"}))).append(n('<div role="application">').addClass("controls").data("active",!0).on("focus keydown mouseenter",p).on("blur mouseleave",w).append(n("<a>").addClass("play control button").attr({title:t.getString("JsVideoPlayerPlay"),tabIndex:"0"}).on("click keydown",wt)).append(n("<a>").addClass("volume control button").attr({title:t.getString("JsVideoPlayerVolume"),"aria-role":"slider","aria-readonly":"false","aria-valuemin":"0","aria-valuemax":"1","aria-valuenow":o.videoElement.volume,tabIndex:"0"}).on("click keydown",ei).on("focus mouseenter",it).on("blur mouseleave",rt).append(n("<div>").addClass("volumeSlider").hide().on("click",ai).on("mouseenter",it).on("mouseleave",rt).append(n("<div>").addClass("handle").draggable({axis:"y",containment:"parent",start:hi,drag:ci,stop:li})))).append(n("<a>").addClass("skipBack control label").attr({title:t.getString("JsVideoPlayerSkipBack"),role:"timer",tabIndex:"0"}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",ti).on("blur mouseleave",ii).on("click keydown",ni)).append(n("<div>").addClass("spacer control")).append(n("<div>").addClass("seek control").attr({title:t.getString("JsVideoPlayerSeek"),"aria-label":t.getString("JsVideoPlayerSeek"),"aria-role":"progress","aria-readonly":"true","aria-valuemin":"0","aria-valuemax":o.episode.length,"aria-valuenow":o.videoElement.currentTime,tabIndex:"0",readonly:"true"}).on("click keydown",tt).append(n("<div>").addClass("handle").draggable({axis:"x",containment:"parent",start:bt,drag:kt,stop:dt}))).append(n("<a>").addClass("skipAhead control label").attr({title:t.getString("JsVideoPlayerSkipAhead"),role:"timer",tabIndex:"0"}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",ui).on("blur mouseleave",fi).on("click keydown",ri)).append(n("<a>").addClass("closedCaptions control button").attr({title:t.getString("JsVideoPlayerClosedCaptions"),tabIndex:"0"}).on("click keydown",ut).append(n("<details>").attr("open","open").hide().on("focus mouseenter",ot).on("blur mouseleave",st).append(n("<summary>").text(t.getString("JsVideoPlayerClosedCaptions"))).ifThen(o.tracks.length,function(){this.append(n("<section>").addClass("cc").append(n("<header>").append(n("<h2>").text(t.getString("JsVideoPlayerClosedCaptions")))).append(n("<a>").addClass("off button selected").attr({title:t.getString("JsVideoPlayerClosedCaptionsOff"),"aria-pressed":"true"}).text(t.getString("JsVideoPlayerClosedCaptionsOffShort")).on("click keydown",bi)).append(n("<a>").addClass("on button").attr({title:t.getString("JsVideoPlayerClosedCaptionsOn"),"aria-pressed":"false"}).text(t.getString("JsVideoPlayerClosedCaptionsOnShort")).on("click keydown",ht)).append(n("<div>").addClass("selector").append(n("<div>").addClass("dropdown").ifThen(o.tracks.length,function(){for(var t,r,i=0;i<o.tracks.length;i++)t=o.tracks[i],r=t.language==o.language,n(this).append(n("<a>").addClass(t.language+" button"+(r?" selected":"")).attr({tabIndex:"0",lang:t.language,"aria-pressed":r?"true":"false"}).text(t.label).on("click keydown",ki))}))))}))).append(n("<a>").addClass("settings control button").attr({title:t.getString("JsVideoPlayerSettings"),tabIndex:"0"}).on("click keydown",ut).append(n("<details>").attr("open","open").hide().on("focus mouseenter",ot).on("blur mouseleave",st).append(n("<summary>").text(t.getString("JsVideoPlayerSettings"))).append(n("<section>").addClass("quality").append(n("<header>").append(n("<h2>").text(t.getString("JsVideoPlayerQuality")))).ifThen(o.qualities.length,function(){for(var i,r=0;r<o.qualities.length;r++)i=o.qualities[r],this.append(n("<a>").addClass(i.label+" button").attr({"aria-pressed":"false"}).data("quality",i.label).data("src",i.src).text(t.getString("JsVideoPlayerQuality"+i.label)).on("click keydown",di).ifThen(o.quality==i.label,function(){this.addClass("selected");this.attr("aria-pressed","true")}))})).append(n("<section>").addClass("speed").append(n("<header>").append(n("<h2>").text(t.getString("JsVideoPlayerSpeed")))).ifThen(o.speeds.length,function(){for(var i,r=0;r<o.speeds.length;r++)i=o.speeds[r],this.append(n("<a>").addClass(i.label+" button").attr({"aria-pressed":"false"}).data("speed",i.label).data("value",i.value).text(t.getString("JsVideoPlayerSpeed"+i.label)).on("click keydown",gi).ifThen(o.speed==i.value,function(){this.addClass("selected");this.attr("aria-pressed","true")}))})))).append(n("<a>").addClass("channel9Link control button").attr({href:o.permalink,title:t.getString("JsVideoPlayerWatchChannel9"),tabIndex:"0"}).on("click keydown",y)).append(n("<a>").addClass("fullscreen control button").attr({title:t.getString("JsVideoPlayerFullscreen"),tabIndex:"0"}).on("click keydown",ct))))};try{n(o.videoElement).on("volumechange",vi);n(o.videoElement).on("play pause timeupdate",er);n(o.videoElement).on("timeupdate",gt)}catch(yt){r&&console.log("error attaching events to html5 video player: "+JSON.stringify(yt))}try{document.addEventListener("fullscreenchange",c);document.addEventListener("webkitfullscreenchange",c);document.addEventListener("mozfullscreenchange",c);document.addEventListener("MSFullscreenChange",c)}catch(yt){r&&console.log("error attaching events to document: "+JSON.stringify(yt))}return n(function(){var n=function(){ar();lt();p();w();o.language&&o.showCaptions&&ht()};n()}),{remove:function(){if(o.videoElement.src="",n(".ch9p",o.playerGoesHere).empty().remove(),o.pagePromises)for(var t=0;t<o.pagePromises.length;t++)o.pagePromises[t].fail()}}}})(jQuery);
(function(){"use strict";var n=ch9.functions,t=n.helpers,i=t.debug;n.WebVTTMarkerParser=function(){var u=function(){var n=this;return this.cues=[],{getCues:function(){return n.cues},addCue:function(t){n.cues.push(t)}}},i=function(){var n=this;return this.begin=null,this.end=null,this.content="",{getBegin:function(){return n.begin},setBegin:function(t){n.begin=t},getEnd:function(){return n.end},setEnd:function(t){n.end=t},getContent:function(){return n.content},setContent:function(t){n.content=t}}},r=/ \-\-\> /,f=function(f){for(var w=new u,v=[],e=new i,p=null,y=f.replace(/\r\n/,"\n").split(/\n/),h,a,b,l,k,c,o,y=$.grep(y,function(n){return n?n.trim()!="":!1}),s=0;s<y.length;s++)if(h=y[s],!/^WEBVTT/.test(h)&&!/^WEBVTT FILE/.test(h)&&!/^NOTE/.test(h))if(r.test(h)){e.getContent()!=null&&e.getContent().trim()!=""&&v.push(e);e=new i;a=h.split(r);a=$.grep(a,function(n){return n?n.trim()!="":!1});b=a[0];l=a[1].split(" ");l=$.grep(l,function(n){return n?n.trim()!="":!1});k=l[0];l.shift(0);var tt=l,d=new n.TimeExpression,g=d.parse(b||0),nt=d.parse(k||0);e.setBegin(g);e.setEnd(nt);e.setContent("")}else c=e.getContent().trim(),c!=""&&(c+="\n"),c+=unescape(h),c=t.widowControl(c).replace(/\n/,"<br>").replace(/\r/,"<br>"),e.setContent(c);for(e.getContent()!=null&&e.getContent().trim()!=""&&v.push(e),s=0;s<v.length;s++)(o=v[s],o.getContent().trim()!="")&&(p!=null&&o.begin<p.begin||o.end<o.begin||(w.addCue({begin:o.getBegin(),end:o.getEnd(),content:o.getContent()}),p=o));return w};return{parseMarkerCollection:function(n){var t=f(n);return t.getCues()}}};n.TimeExpression=function(){var n=/(\d{2}):(\d{2}):(\d{2})\.(\d+)/,t=/(\d{2}):(\d{2})\.(\d+)/;return{parse:function(r){var e,o,s,h=0,f=r.trim(),c=n.test(f),u=n.exec(f);if(!c)if(i&&console.log("Invalid time expression: "+r),t.test(f))u=t.exec(f),u.splice(1,0,"00");else return null;return e=parseFloat(u[1]*36e5),o=parseInt(u[2]*6e4),s=parseInt(u[3]*1e3),u[4]!=""&&(h=parseFloat(u[4])),(e+o+s+h)/1e3}}}})();
window.Silverlight||(window.Silverlight={});Silverlight._silverlightCount=0;Silverlight.__onSilverlightInstalledCalled=!1;Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";Silverlight.__installationEventFired=!1;Silverlight.onGetSilverlight=null;Silverlight.onSilverlightInstalled=function(){window.location.reload(!1)};Silverlight.isInstalled=function(n,t){var i,l,s,h,e,r,u,o,c,f;if(!t)return!1;n==undefined&&(n=null);i=!1;try{s=!1;try{l=new ActiveXObject("AgControl.AgControl");n===null?i=!0:l.IsVersionSupported(n)&&(i=!0)}catch(a){s=!0}if(!s)return i;if(h=navigator.plugins["Silverlight Plug-In"],h)if(n===null)i=!0;else{for(e=h.description,e==="1.0.30226.2"&&(e="2.0.30226.2"),r=e.split(".");r.length>3;)r.pop();while(r.length<4)r.push(0);for(u=n.split(".");u.length>4;)u.pop();f=0;do o=parseInt(u[f]),c=parseInt(r[f]),f++;while(f<u.length&&o===c);o<=c&&!isNaN(o)&&(i=!0)}}catch(a){i=!1}return i};Silverlight.WaitForInstallCompletion=function(){};Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var n=navigator.mimeTypes["application/x-silverlight-2"],i=navigator.mimeTypes["application/x-silverlight-2-b2"],r=navigator.mimeTypes["application/x-silverlight-2-b1"],t=r;i&&(t=i);!n&&(r||i)?Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0):n&&t&&n.enabledPlugin&&t.enabledPlugin&&n.enabledPlugin.description!=t.enabledPlugin.description&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0))}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||window.removeEventListener};Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup));Silverlight.createObject=function(n,t,i,r,u,f,e,o){var c=u,s=r,l,h,v,a;if(s.source=n,l={version:s.version,alt:s.alt,autoupgrade:s.autoupgrade,upgradeMessage:s.upgradeMessage},f&&(s.initParams=f),s.isWindowless&&!s.windowless&&(s.windowless=s.isWindowless),s.framerate&&!s.maxFramerate&&(s.maxFramerate=s.framerate),i&&!s.id&&(s.id=i),delete s.ignoreBrowserVer,delete s.inplaceInstallPrompt,delete s.version,delete s.isWindowless,delete s.framerate,delete s.data,delete s.src,delete s.alt,delete s.autoupgrade,delete s.upgradeMessage,Silverlight.isInstalled(l.version,o)){for(h in c)if(c[h])if(h=="onLoad"&&typeof c[h]=="function"&&c[h].length!=1&&(v=c[h],c[h]=function(n){return v(document.getElementById(i),e,n)}),a=Silverlight.__getHandlerName(c[h]),a!=null)s[h]=a,c[h]=null;else throw"typeof events."+h+" must be 'function' or 'string'";slPluginHTML=Silverlight.buildHTML(s)}else slPluginHTML=Silverlight.buildPromptHTML(l);return t&&(t.innerHTML=slPluginHTML),slPluginHTML};Silverlight.buildHTML=function(n){var t=[],i;t.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"');n.id!=null&&t.push(' id="'+Silverlight.HtmlAttributeEncode(n.id)+'"');n.width!=null&&t.push(' width="'+n.width+'"');n.height!=null&&t.push(' height="'+n.height+'"');n["class"]!=null&&t.push(' class="'+n["class"]+'"');t.push(" >");delete n.id;delete n.width;delete n.height;delete n["class"];for(i in n)n[i]&&t.push('<param name="'+Silverlight.HtmlAttributeEncode(i)+'" value="'+Silverlight.HtmlAttributeEncode(n[i])+'" />');return t.push("<\/object>"),t.join("")};Silverlight.createObjectEx=function(n){var t=n,i=Silverlight.createObject(t.source,t.parentElement,t.id,t.properties,t.events,t.initParams,t.context);if(t.parentElement==null)return i};Silverlight.buildPromptHTML=function(n){var t="",r=Silverlight.fwlinkRoot,i=n.version;return Silverlight.isInstalled(null)&&n.autoupgrade&&n.upgradeMessage?t=n.upgradeMessage:n.alt?t=n.alt:(i||(i=""),t="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/><\/a>",t=t.replace("{1}",i),t=t.replace("{2}",r+"161376")),t};Silverlight.getSilverlight=function(n){var i,t,r,u;Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight();i="";t=String(n).split(".");t.length>1&&(r=parseInt(t[0]),i=isNaN(r)||r<2?"1.0":t[0]+"."+t[1]);u="";i.match(/^\d+\056\d+$/)&&(u="&v="+i);Silverlight.followFWLink("149156"+u)};Silverlight.followFWLink=function(n){top.location=Silverlight.fwlinkRoot+String(n)};Silverlight.HtmlAttributeEncode=function(n){var t,i="",r;if(n==null)return null;for(r=0;r<n.length;r++)t=n.charCodeAt(r),i=t>96&&t<123||t>64&&t<91||t>43&&t<58&&t!=47||t==95?i+String.fromCharCode(t):i+"&#"+t+";";return i};Silverlight.default_error_handler=function(n,t){var r=t.ErrorType,u=t.ErrorCode,i="\nSilverlight error message     \n";i+="ErrorCode: "+u+"\n";i+="ErrorType: "+r+"       \n";i+="Message: "+t.ErrorMessage+"     \n";r=="ParserError"?(i+="XamlFile: "+t.xamlFile+"     \n",i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"):r=="RuntimeError"&&(t.lineNumber!=0&&(i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"),i+="MethodName: "+t.methodName+"     \n");alert(i)};Silverlight.__cleanup=function(){for(var n=Silverlight._silverlightCount-1;n>=0;n--)window["__slEvent"+n]=null;Silverlight._silverlightCount=0;window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup)};Silverlight.__getHandlerName=function(n){var t="",i;return typeof n=="string"?t=n:typeof n=="function"?(Silverlight._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup)),i=Silverlight._silverlightCount++,t="__slEvent"+i,window[t]=n):t=null,t};Silverlight.onRequiredVersionAvailable=function(){};Silverlight.onRestartRequired=function(){};Silverlight.onUpgradeRequired=function(){};Silverlight.onInstallRequired=function(){};Silverlight.IsVersionAvailableOnError=function(n,t){var i=!1;try{t.ErrorCode!=8001||Silverlight.__installationEventFired?t.ErrorCode!=8002||Silverlight.__installationEventFired?t.ErrorCode==5014||t.ErrorCode==2106?Silverlight.__verifySilverlight2UpgradeSuccess(t.getHost())&&(i=!0):i=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0)}catch(r){}return i};Silverlight.IsVersionAvailableOnLoad=function(n){var t=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(n.getHost())&&(t=!0)}catch(i){}return t};Silverlight.__verifySilverlight2UpgradeSuccess=function(n){var i=!1,r="5.0.61118.0",t=null;try{n.IsVersionSupported(r+".99")?(t=Silverlight.onRequiredVersionAvailable,i=!0):t=n.IsVersionSupported(r+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired;t&&!Silverlight.__installationEventFired&&(t(),Silverlight.__installationEventFired=!0)}catch(u){}return i};
function silverlightLoaded(n){if(!ch9.functions.VideoPlayer)try{ch9.functions.silverlightPresenter.setPlayer(n.getHost().content.Player)}catch(t){console.log("error loading silverlight player: "+t)}}(function(n){"use strict";var t=ch9.functions,u=t.helpers,r=t.Resources,i=u&&u.debug,f={source:"/scripts/player/silverlight/Channel9.xap?v=1.75",version:"5.0.61118.0"};t.SilverlightPresenterConstructor=function(u,e,o){var s=this,c=t.playerPresenter,l,h;return this.player=n.extend({},f,u),this.episode=e,this.user=o,this.videos={smooth:n("ul.smooth a:first",this.player.container).length?n("ul.smooth a:first",this.player.container).attr("href"):"",progressive:n("ul.progressive a:first",this.player.container).length?n("ul.progressive a:first",this.player.container).attr("href"):"",defaultUrl:this.player.defaultVideoUrl},this.deliveryMethod=!this.videos.progressive&&!this.videos.smooth?{delivery:"",video:this.videos.defaultUrl}:!this.videos.smooth||this.player.playerPreference=="progressive"?{delivery:"progressivedownload",video:this.videos.progressive}:{delivery:"adaptivestreaming",video:this.videos.smooth},l=function(n,t,i){var r=[],u,f;if(r.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),n.id!=null&&r.push(' id="'+n.id+'"'),n["class"]!=null&&r.push(' class="'+n["class"]+'"'),n.width!=null&&r.push(' width="'+n.width+'"'),n.height!=null&&r.push(' height="'+n.height+'"'),r.push(">"),n.allowfullscreen!=null&&n.allowfullscreen==!0&&r.push('<param name="allowfullscreen" value="'+n.allowfullscreen+'"/>'),n.allowscriptaccess!=null&&r.push('<param name="allowscriptaccess" value="'+n.allowscriptaccess+'"/>'),n.autoupgrade!=null&&r.push('<param name="autoUpgrade" value="'+n.autoupgrade+'"/>'),n.background!=null&&r.push('<param name="background" value="'+n.background+'"/>'),n.minversion!=null&&r.push('<param name="minRuntimeVersion" value="'+n.minversion+'"/>'),n.source!=null&&r.push('<param name="source" value="'+n.source+'"/>'),n.windowless!=null&&r.push('<param name="windowless" value="'+n.windowless+'"/>'),n.onload!=null&&r.push('<param name="onload" value="'+n.onload+'"/>'),t){r.push('<param name="initParams" value="');u="";for(f in t)u!=""&&(u+=","),u+=f+"="+t[f];r.push(u+'"/>')}return i!=null&&r.push(i),r.push("<\/object>"),r.join("")},h=function(){for(var i,n,u=t.VideoPlayer.target.CreatePlaylist(),f=t.VideoPlayer.target.GetPlaylistItem(),r=0;r<s.episode.captions.length;r++)i=s.episode.captions[r],n=t.VideoPlayer.target.CreateMarkerResource(),n.Label=i.label,n.Language=i.language,n.Format=i.format.replace("webvtt","WebVTT"),n.Source=i.url,n.IsDefault=i.isdefault,f.AddMarkerResource(n);u.AddPlaylistItem(f);t.VideoPlayer.target.SetPlaylist(u)},{haveVideo:s.videos.smooth!=undefined||s.videos.progressive!=undefined,haveSmoothVideo:s.videos.smooth!=undefined,haveProgressiveVideo:s.videos.progressive!=undefined,isPlayPossible:!t.userAgent||t.userAgent.silverlightPossible(),currentVersion:s.player.version,getErrorMessage:function(){var n="<h3>Silverlight<\/h3>";return""+(t.userAgent&&t.userAgent.isMetro()?n+"<p>"+r.getString("JsVideoPlayerSilverlightNotSupported")+"<\/p>":!this.haveVideo&&this.isPlayPossible?n+"<p>"+r.getString("JsVideoPlayerSilverlightNoVideo")+"<\/p>":n+"<p>"+String.format(r.getString("JsVideoPlayerSilverlightNoPlugin"),s.player.version)+"<\/p>")},create:function(t){var r;if(!s.deliveryMethod.video)return t;var u={alt:t||"",autostart:"true",autoupgrade:"true",windowless:"true","class":"Player"},i={width:s.player.width,height:s.player.height};return n.extend(i,f,u),r="scriptablename="+i["class"]+",autostart="+i.autostart+",deliverymethod="+s.deliveryMethod.delivery+",mediaurl="+s.deliveryMethod.video+",thumbnail="+s.episode.images.playerPreview+",entryid="+s.episode.contentId,s.episode.plyCaptionStreamId&&(r+=",subplystreamid="+s.episode.plyCaptionStreamId),Silverlight.createObject(i.source,null,null,i,{onLoad:"silverlightLoaded"},r,"",!0)},setPlayer:function(r){var u,e;t.VideoPlayer=new t.VideoPlayerConstructor("silverlight",r);u=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.Play()},targetPause:function(){this.target&&this.target.Pause()},targetStop:function(){this.target&&this.target.Stop()},targetGetPosition:function(){return this.target?this.target.PlaybackPositionSeconds:null},targetIsPaused:function(){return this.target?this.target.IsPaused:!1},targetIsReady:function(){return this.target?this.target.IsMediaReady:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&this.target.SeekToPosition(n)}};n.extend(u,e);try{var f=c.getStartTime(),o=!1,l=!1;u.target.PlayStateChanged=function(){u.isReady()&&(i&&console.log("silverlight PlayStateChanged event fired && IsMediaReady"),!l&&s.episode.captions.length&&(i&&console.log("setting caption files."),h(u),l=!0),!o&&f.seconds>0&&(o=!0,i&&console.log("seeking to start time: "+f.seconds),u.seek(f)),u.target.IsPaused&&t.Services&&t.VideoPlayer&&t.Services.addVideoProgress(s.episode,s.user))};u.target.PlaybackPositionChanged=function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(s.episode,s.user):u.target.PlaybackPositionChanged=null}}catch(a){i&&console.log("error attaching events to silverlight player: "+a)}t.Spinner&&t.Spinner.hide()}}}})(jQuery);
/*! Player.js - v0.0.10 - 2015-01-12
* http://github.com/embedly/player.js
* Copyright (c) 2015 Embedly; Licensed BSD */
(function(n,t){function e(n){return function(){var r={method:n},t=Array.prototype.slice.call(arguments);/^get/.test(n)?(i.assert(t.length>0,"Get methods require a callback."),t.unshift(r)):(/^set/.test(n)&&(i.assert(t.length!==0,"Set methods require a value."),r.value=t[0]),t=[r]);this.send.apply(this,t)}}var i={},r,f,u;for(i.DEBUG=!1,i.VERSION="0.0.10",i.CONTEXT="player.js",i.POST_MESSAGE=!!n.postMessage,i.ENABLE_CONTEXT=!1,i.origin=function(t){return t.substr(0,2)==="//"&&(t=n.location.protocol+t),t.split("/").slice(0,3).join("/")},i.addEvent=function(n,t,i){n&&(n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i)},i.log=function(){i.log.history=i.log.history||[];i.log.history.push(arguments);n.console&&i.DEBUG&&n.console.log(Array.prototype.slice.call(arguments))},i.isString=function(n){return Object.prototype.toString.call(n)==="[object String]"},i.isObject=function(n){return Object.prototype.toString.call(n)==="[object Object]"},i.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},i.isNone=function(n){return n===null||n===undefined},i.has=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.indexOf=function(n,t){if(n==null)return-1;var i=0,r=n.length;if(Array.prototype.IndexOf&&n.indexOf===Array.prototype.IndexOf)return n.indexOf(t);for(;i<r;i++)if(n[i]===t)return i;return-1},i.assert=function(n,t){if(!n)throw t||"Player.js Assert Failed";},i.Keeper=function(){this.init()},i.Keeper.prototype.init=function(){this.data={}},i.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},i.Keeper.prototype.has=function(n,t){var u,r;if(!this.data.hasOwnProperty(n))return!1;if(i.isNone(t))return!0;for(u=this.data[n],r=0;r<u.length;r++)if(u[r].id===t)return!0;return!1},i.Keeper.prototype.add=function(n,t,i,r,u){var f={id:n,event:t,cb:i,ctx:r,one:u};this.has(t)?this.data[t].push(f):this.data[t]=[f]},i.Keeper.prototype.execute=function(n,t,r,u){var e,o,s,f,h,c;if(!this.has(n,t))return!1;for(e=[],o=[],s=0;s<this.data[n].length;s++)f=this.data[n][s],i.isNone(t)||!i.isNone(t)&&f.id===t?(o.push({cb:f.cb,ctx:f.ctx?f.ctx:u,data:r}),f.one===!1&&e.push(f)):e.push(f);for(e.length===0?delete this.data[n]:this.data[n]=e,h=0;h<o.length;h++)c=o[h],c.cb.call(c.ctx,c.data)},i.Keeper.prototype.on=function(n,t,i,r){this.add(n,t,i,r,!1)},i.Keeper.prototype.one=function(n,t,i,r){this.add(n,t,i,r,!0)},i.Keeper.prototype.off=function(n,t){var e=[],u,f,r;if(!this.data.hasOwnProperty(n))return e;for(u=[],f=0;f<this.data[n].length;f++)r=this.data[n][f],i.isNone(t)||r.cb===t?i.isNone(r.id)||e.push(r.id):u.push(r);return u.length===0?delete this.data[n]:this.data[n]=u,e},i.Player=function(n,t){if(!(this instanceof i.Player))return new i.Player(n,t);this.init(n,t)},i.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},i.EVENTS.all=function(){var t=[];for(var n in i.EVENTS)i.has(i.EVENTS,n)&&i.isString(i.EVENTS[n])&&t.push(i.EVENTS[n]);return t},i.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},i.METHODS.all=function(){var t=[];for(var n in i.METHODS)i.has(i.METHODS,n)&&i.isString(i.METHODS[n])&&t.push(i.METHODS[n]);return t},i.READIED=[],i.Player.prototype.init=function(r){var u=this;i.isString(r)&&(r=t.getElementById(r));this.elem=r;this.origin=i.origin(r.src);this.keeper=new i.Keeper;this.isReady=!1;this.queue=[];this.events=i.EVENTS.all();this.methods=i.METHODS.all();i.POST_MESSAGE?i.addEvent(n,"message",function(n){u.receive(n)}):i.log("Post Message is not Available.");i.indexOf(i.READIED,r.src)>-1?u.loaded=!0:this.elem.onload=function(){u.loaded=!0}},i.Player.prototype.send=function(n,t,r){if(n.context=i.CONTEXT,n.version=i.VERSION,t){var u=this.keeper.getUUID();n.listener=u;this.keeper.one(u,n.method,t,r)}return!this.isReady&&n.value!=="ready"?(i.log("Player.queue",n),this.queue.push(n),!1):(i.log("Player.send",n,this.origin),this.loaded===!0&&this.elem.contentWindow.postMessage(JSON.stringify(n),this.origin),!0)},i.Player.prototype.receive=function(n){if(i.log("Player.receive",n),n.origin!==this.origin)return!1;var t;try{t=JSON.parse(n.data)}catch(r){return!1}if(i.ENABLE_CONTEXT&&t.context!==i.CONTEXT)return!1;t.event==="ready"&&t.value&&t.value.src===this.elem.src&&this.ready(t);this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)},i.Player.prototype.ready=function(n){var r,t;if(this.isReady===!0)return!1;for(n.value.events&&(this.events=n.value.events),n.value.methods&&(this.methods=n.value.methods),this.isReady=!0,this.loaded=!0,r=0;r<this.queue.length;r++)t=this.queue[r],i.log("Player.dequeue",t),n.event==="ready"&&this.keeper.execute(t.event,t.listener,!0,this),this.send(t);this.queue=[]},i.Player.prototype.on=function(n,t,i){var r=this.keeper.getUUID();if(n==="ready")this.keeper.one(r,n,t,i);else this.keeper.on(r,n,t,i);return this.send({method:"addEventListener",value:n,listener:r}),!0},i.Player.prototype.off=function(n,t){var r=this.keeper.off(n,t),u;if(i.log("Player.off",r),r.length>0)for(u in r)return this.send({method:"removeEventListener",value:n,listener:r[u]}),!0;return!1},i.Player.prototype.supports=function(n,t){var u,r;for(i.assert(i.indexOf(["method","event"],n)>-1,'evtOrMethod needs to be either "event" or "method" got '+n),t=i.isArray(t)?t:[t],u=n==="event"?this.events:this.methods,r=0;r<t.length;r++)if(i.indexOf(u,t[r])===-1)return!1;return!0},r=0,f=i.METHODS.all().length;r<f;r++)u=i.METHODS.all()[r],i.Player.prototype.hasOwnProperty(u)||(i.Player.prototype[u]=e(u));n.playerjs=i;i.addEvent(n,"message",function(n){var t;try{t=JSON.parse(n.data)}catch(r){return!1}if(i.ENABLE_CONTEXT&&t.context!==i.CONTEXT)return!1;t.event==="ready"&&t.value&&t.value.src&&i.READIED.push(t.value.src)});i.Receiver=function(n,t){this.init(n,t)};i.Receiver.prototype.init=function(r,u){var f=this;this.isReady=!1;this.origin=i.origin(t.referrer);this.methods={};this.supported={events:r?r:i.EVENTS.all(),methods:u?u:i.METHODS.all()};this.eventListeners={};this.reject=!(n.self!==n.top&&i.POST_MESSAGE);this.reject||i.addEvent(n,"message",function(n){f.receive(n)})};i.Receiver.prototype.receive=function(t){var r,u,f;if(t.origin!==this.origin)return!1;if(r={},i.isObject(t.data))r=t.data;else try{r=n.JSON.parse(t.data)}catch(e){i.log("JSON Parse Error",e)}if((i.log("Receiver.receive",t,r),!r.method)||i.ENABLE_CONTEXT&&r.context!==i.CONTEXT)return!1;if(i.indexOf(i.METHODS.all(),r.method)===-1)return this.emit("error",{code:2,msg:'Invalid Method "'+r.method+'"'}),!1;u=i.isNone(r.listener)?null:r.listener;r.method==="addEventListener"?(this.eventListeners.hasOwnProperty(r.value)?i.indexOf(this.eventListeners[r.value],u)===-1&&this.eventListeners[r.value].push(u):this.eventListeners[r.value]=[u],r.value==="ready"&&this.isReady&&this.ready()):r.method==="removeEventListener"?this.eventListeners.hasOwnProperty(r.value)&&(f=i.indexOf(this.eventListeners[r.value],u),f>-1&&this.eventListeners[r.value].splice(f,1),this.eventListeners[r.value].length===0&&delete this.eventListeners[r.value]):this.get(r.method,r.value,u)};i.Receiver.prototype.get=function(n,t,i){var f=this,r,u;if(!this.methods.hasOwnProperty(n))return this.emit("error",{code:3,msg:'Method Not Supported"'+n+'"'}),!1;r=this.methods[n];n.substr(0,3)==="get"?(u=function(t){f.send(n,t,i)},r.call(this,u)):r.call(this,t)};i.Receiver.prototype.on=function(n,t){this.methods[n]=t};i.Receiver.prototype.send=function(t,r,u){var f,e;if(i.log("Receiver.send",t,r,u),this.reject)return i.log("Receiver.send.reject",t,r,u),!1;f={context:i.CONTEXT,version:i.VERSION,event:t};i.isNone(r)||(f.value=r);i.isNone(u)||(f.listener=u);e=JSON.stringify(f);n.parent.postMessage(e,this.origin===""?"*":this.origin)};i.Receiver.prototype.emit=function(n,t){var r,u;if(!this.eventListeners.hasOwnProperty(n))return!1;for(i.log("Instance.emit",n,t,this.eventListeners[n]),r=0;r<this.eventListeners[n].length;r++)u=this.eventListeners[n][r],this.send(n,t,u);return!0};i.Receiver.prototype.ready=function(){i.log("Receiver.ready");this.isReady=!0;var t={src:n.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",t)||this.send("ready",t)};i.HTML5Adapter=function(n){if(!(this instanceof i.HTML5Adapter))return new i.HTML5Adapter(n);this.init(n)};i.HTML5Adapter.prototype.init=function(n){i.assert(n,"playerjs.VideoJSReceiver requires a video element");var t=this.receiver=new i.Receiver;n.addEventListener("playing",function(){t.emit("play")});n.addEventListener("pause",function(){t.emit("pause")});n.addEventListener("ended",function(){t.emit("ended")});n.addEventListener("timeupdate",function(){t.emit("timeupdate",{seconds:n.currentTime,duration:n.duration})});n.addEventListener("progress",function(){t.emit("buffered",{percent:n.buffered.length})});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getPaused",function(t){t(n.paused)});t.on("getCurrentTime",function(t){t(n.currentTime)});t.on("setCurrentTime",function(t){n.currentTime=t});t.on("getDuration",function(t){t(n.duration)});t.on("getVolume",function(t){t(n.volume*100)});t.on("setVolume",function(t){n.volume=t/100});t.on("mute",function(){n.muted=!0});t.on("unmute",function(){n.muted=!1});t.on("getMuted",function(t){t(n.muted)});t.on("getLoop",function(t){t(n.loop)});t.on("setLoop",function(t){n.loop=t})};i.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};i.JWPlayerAdapter=function(n){if(!(this instanceof i.JWPlayerAdapter))return new i.JWPlayerAdapter(n);this.init(n)};i.JWPlayerAdapter.prototype.init=function(n){var t,r;i.assert(n,"playerjs.JWPlayerAdapter requires a player object");t=this.receiver=new i.Receiver;this.looped=!1;n.onPause(function(){t.emit("pause")});n.onPlay(function(){t.emit("play")});n.onTime(function(n){var i=n.position,r=n.duration,u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});r=this;n.onComplete(function(){r.looped===!0?n.seek(0):t.emit("ended")});n.onError(function(){t.emit("error")});t.on("play",function(){n.play(!0)});t.on("pause",function(){n.pause(!0)});t.on("getPaused",function(t){t(n.getState()!=="PLAYING")});t.on("getCurrentTime",function(t){t(n.getPosition())});t.on("setCurrentTime",function(t){n.seek(t)});t.on("getDuration",function(t){t(n.getDuration())});t.on("getVolume",function(t){t(n.getVolume())});t.on("setVolume",function(t){n.setVolume(t)});t.on("mute",function(){n.setMute(!0)});t.on("unmute",function(){n.setMute(!1)});t.on("getMuted",function(t){t(n.getMute()===!0)});t.on("getLoop",function(n){n(this.looped)},this);t.on("setLoop",function(n){this.looped=n},this)};i.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};i.MockAdapter=function(){if(!(this instanceof i.MockAdapter))return new i.MockAdapter;this.init()};i.MockAdapter.prototype.init=function(){var n={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){n.interval=setInterval(function(){n.currentTime+=.25;n.timeupdate({seconds:n.currentTime,duration:n.duration})},250);n.playing=!0},pause:function(){clearInterval(n.interval);n.playing=!1}},t=this.receiver=new i.Receiver;t.on("play",function(){var t=this;n.play();this.emit("play");n.timeupdate=function(n){t.emit("timeupdate",n)}});t.on("pause",function(){n.pause();this.emit("pause")});t.on("getPaused",function(t){t(!n.playing)});t.on("getCurrentTime",function(t){t(n.currentTime)});t.on("setCurrentTime",function(t){n.currentTime=t});t.on("getDuration",function(t){t(n.duration)});t.on("getVolume",function(t){t(n.volume)});t.on("setVolume",function(t){n.volume=t});t.on("mute",function(){n.mute=!0});t.on("unmute",function(){n.mute=!1});t.on("getMuted",function(t){t(n.mute)});t.on("getLoop",function(t){t(n.loop)});t.on("setLoop",function(t){n.loop=t})};i.MockAdapter.prototype.ready=function(){this.receiver.ready()};i.SublimeAdapter=function(n){if(!(this instanceof i.SublimeAdapter))return new i.SublimeAdapter(n);this.init(n)};i.SublimeAdapter.prototype.events=[i.EVENTS.READY,i.EVENTS.PLAY,i.EVENTS.PAUSE,i.EVENTS.ENDED,i.EVENTS.TIMEUPDATE,i.EVENTS.ERROR];i.SublimeAdapter.prototype.methods=[i.METHODS.PLAY,i.METHODS.PAUSE,i.METHODS.GETDURATION,i.METHODS.SETCURRENTTIME,i.METHODS.GETCURRENTTIME,i.METHODS.REMOVEEVENTLISTENER,i.METHODS.ADDEVENTLISTENER];i.SublimeAdapter.prototype.init=function(n){i.assert(n,"playerjs.SublimeAdapter requires a player object");var t=this.receiver=new i.Receiver(this.events,this.methods);n.on("pause",function(){t.emit("pause")});n.on("play",function(){t.emit("play")});n.on("timeUpdate",function(n,i){var r=n.duration(),u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});n.on("end",function(){t.emit("ended")});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getCurrentTime",function(t){t(n.playbackTime())});t.on("setCurrentTime",function(t){n.seekTo(t)});t.on("getDuration",function(t){t(n.duration())})};i.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};i.VideoJSAdapter=function(n){if(!(this instanceof i.VideoJSAdapter))return new i.VideoJSAdapter(n);this.init(n)};i.VideoJSAdapter.prototype.init=function(n){i.assert(n,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new i.Receiver;n.on("pause",function(){t.emit("pause")});n.on("play",function(){t.emit("play")});n.on("timeupdate",function(){var i=n.currentTime(),r=n.duration(),u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});n.on("ended",function(){t.emit("ended")});n.on("error",function(){t.emit("error")});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getPaused",function(t){t(n.paused())});t.on("getCurrentTime",function(t){t(n.currentTime())});t.on("setCurrentTime",function(t){n.currentTime(t)});t.on("getDuration",function(t){t(n.duration())});t.on("getVolume",function(t){t(n.volume()*100)});t.on("setVolume",function(t){n.volume(t/100)});t.on("mute",function(){n.volume(0)});t.on("unmute",function(){n.volume(1)});t.on("getMuted",function(t){t(n.volume()===0)});t.on("getLoop",function(t){t(n.loop())});t.on("setLoop",function(t){n.loop(t)})};i.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}})(window,document);
(function(n){"use strict";var t=ch9.functions,i=t.helpers,u=t.Resources,r=i&&i.debug,f={allowfullscreen:!0,autoplay:!0},e={officemix:"officemix"},o={officemix:{order:0}};t.OfficemixPresenterConstructor=function(s,h,c){var l=this,v=t.playerPresenter,a;return this.player=n.extend({},f,s),this.episode=h,this.user=c,this.videos=n("ul.officemix a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),this.haveDoneSeek=!1,a=function(n){var t=[];return t.push("<iframe"),n.id!=null&&t.push(' id="'+n.id+'"'),n["class"]!=null&&t.push(' class="'+n["class"]+'"'),n.src!=null&&t.push(' src="'+n.src+'"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),n.autoplay!=null&&n.autoplay==!0&&t.push(" autoplay"),n.allowfullscreen!=null&&n.allowfullscreen==!0&&t.push(" allowfullscreen"),t.push(' frameborder="0"'),t.push(' onload="ch9.functions.officemixPresenter.officemixLoaded(this);"'),t.push(">"),t.push("<\/iframe>"),t.join("")},{playerId:"officemixPlayer",haveVideo:l.videos.length>0,isPlayPossible:!0,getErrorMessage:function(){var n="<h3>Office Mix<\/h3>";return""+(this.isPlayPossible&&!this.haveVideo?n+"<p>"+u.getString("JsVideoPlayerOfficeMixNoVideo")+"<\/p>":n+"<p>"+u.getString("JsVideoPlayerOfficeMixNotSupoprted")+"<\/p>")},create:function(t){var r=n.grep(l.videos,function(n){return e[n.type]});r=r.sort(i.sortVideosBy(o));var u=r&&r.length>0?r[0]:{url:""},s={id:this.playerId,"class":"Player",fallback:t},f={};return!u||!u.url?t:(f.src=i.addQueryStringParam(u.url,"play"),n.extend(f,l.player,s),a(f))},setPlayer:function(i){var f,e,u;t.VideoPlayer=new t.VideoPlayerConstructor("officemix",i);f=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.play&&typeof this.target.play=="function"&&this.target.play()},targetPause:function(){this.target&&this.target.pause&&typeof this.target.pause=="function"&&this.target.pause()},targetStop:function(){return},targetGetPosition:function(){return 0},targetIsPaused:function(){return!1},targetIsReady:function(){return!0},targetSeek:function(n){this.target&&this.target.setCurrentTime(n)},targetCanSeek:function(){return this.target?this.target.supports("method","setCurrentTime"):!1}};n.extend(f,e);try{u=v.getStartTime();u.seconds>0&&(r&&console.log("seeking to start time: "+u.seconds),f.seek(u))}catch(o){r&&console.log("error attaching events to Office Mix player: "+o)}},officemixLoaded:function(n){if(t.Spinner&&t.Spinner.hide(),!t||!t.VideoPlayer)try{playerjs&&typeof playerjs!="undefined"&&(n=new playerjs.Player(n));this.setPlayer(n)}catch(i){r&&console.log("error loading Office Mix player: "+i)}}}}})(jQuery);